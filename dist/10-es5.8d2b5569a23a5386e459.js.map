{"version":3,"sources":["webpack:///src/app/layouts/browser-compatibility-error/browser-compatibility-error.component.ts","webpack:///src/app/layouts/browser-compatibility-error/browser-compatibility-error.component.html","webpack:///src/app/modules/features/planning-board/planning-board/planning-board.component.html","webpack:///src/app/modules/features/planning-board/planning-board/planning-board.component.ts","webpack:///src/app/modules/features/planning-board/planning-board.module.ts"],"names":["BrowserCompatibilityErrorComponent","PlanningBoardComponent","PlanningBoardModule","handler","browserDetectionService","this","httpClient","isCompatibleWithCustomComponents","addPlanningBoardWebComponent","now","valueOf","get","environment","planning_board_url","toPromise","version","customElements","script","document","createElement","getVersion","src","body","appendChild","isCompatibleWithCustomElements","ROUTES","path","component","forChild"],"mappings":"2aAOaA,E,qHAAN,IAAMA,EAAN,yB,oCAAMA,I,uBAAAA,EAAkC,6JCP/C,gBACC,mBAAU,gBAAK,OACf,eACC,Q,oBACD,OACA,YACC,Q,oBACD,OACD,Q,MALE,gEAGA,gE,sgBCNF,gBACC,yBACD,Q,qBAGC,0CCeM,IAAMC,ECIAC,EDJN,IAAMD,EAAN,WAON,WACCE,EACiBC,aAAA,KAAAA,0BAEjBC,KAAKC,WAAa,IAAI,IAAWH,GAE7BE,KAAKE,kCACRF,KAAKG,+B,UAdD,O,EAAA,G,EAAA,oC,kKAuBL,OAJMC,EAAM,MAASC,U,SACEL,KAAKC,WAC1BK,IADqBN,UACQO,EAAA,EAAYC,mBADpBR,kCACgEI,IACrFK,Y,uCACcC,S,kDAvBX,qD,wKA2BDC,eAAeL,IAzCM,kB,iDA6CnBI,OADAE,EAASC,SAASC,cAAc,U,SAChBd,KAAKe,a,OAArBL,E,OACNE,EAAOI,IAAPJ,UAAgBL,EAAA,EAAYC,mBAA5BI,gCAAsEF,GACtEG,SAASI,KAAKC,YAAYN,G,kDAjCrB,uDAIL,OAAOZ,KAAKD,wBAAwBoB,sC,2BAJ/B,M,oCAAMvB,GAAsB,sB,uBAAtBA,EAAsB,kDAJvB,CACV,OACA,uH,GAAA,MDlBF,sBAIA,yC,mBAJK,gDAAiE,gB,iHEOhEwB,EAAS,CACd,CACCC,KAAM,GACNC,UAAW,IAcN,IAAMzB,EAAN,yB,qBAAMA,I,oDAAAA,IAAmB,SAPtB,CACR,IAAa0B,SAASH,GACtB,IACA,KAES,O","file":"x","sourcesContent":["import { Component } from '@angular/core';\n\n@Component({\n\tselector: 'app-browser-compatibility-error',\n\ttemplateUrl: './browser-compatibility-error.component.html',\n\tstyleUrls: ['./browser-compatibility-error.component.scss'],\n})\nexport class BrowserCompatibilityErrorComponent {\n}\n","<div class=\"browser-compatibility-error\">\n\t<mat-icon>error</mat-icon>\n\t<h3 class=\"montserrat-text\">\n\t\t{{'browser-compatibility.message' | translate}}\n\t</h3>\n\t<p>\n\t\t{{'browser-compatibility.error' | translate}}\n\t</p>\n</div>\n","<div *ngIf=\"isCompatibleWithCustomComponents; else compatibilityError\" class=\"row\">\n\t<planning-board></planning-board>\n</div>\n\n<ng-template #compatibilityError>\n\t<app-browser-compatibility-error></app-browser-compatibility-error>\n</ng-template>\n","import { Component } from '@angular/core';\nimport { environment } from '../../../../../environments/environment';\nimport { HttpBackend, HttpClient } from '@angular/common/http';\nimport moment from 'moment';\nimport { BrowserDetectionService } from '../../../core/services/browser-detection.service';\n\nconst PLANNING_BOARD_TAG = 'planning-board';\n\ninterface PlanningBoardVersion {\n\tversion: number;\n}\n\n@Component({\n\tselector: 'app-planning-board',\n\ttemplateUrl: './planning-board.component.html',\n\tstyleUrls: ['./planning-board.component.scss'],\n\tproviders: [\n\t\tBrowserDetectionService,\n\t],\n})\nexport class PlanningBoardComponent {\n\tprivate readonly httpClient: HttpClient;\n\n\tget isCompatibleWithCustomComponents(): boolean {\n\t\treturn this.browserDetectionService.isCompatibleWithCustomElements();\n\t}\n\n\tconstructor(\n\t\thandler: HttpBackend,\n\t\tprivate readonly browserDetectionService: BrowserDetectionService,\n\t) {\n\t\tthis.httpClient = new HttpClient(handler);\n\t\t\n\t\tif (this.isCompatibleWithCustomComponents) {\n\t\t\tthis.addPlanningBoardWebComponent();\n\t\t}\n\t}\n\n\tprivate async getVersion(): Promise<number> {\n\t\tconst now = moment().valueOf();\n\t\tconst response = await this.httpClient\n\t\t\t.get<PlanningBoardVersion>(`${environment.planning_board_url}/static/version.json?t=${now}`)\n\t\t\t.toPromise();\n\t\treturn response.version;\n\t}\n\n\tprivate async addPlanningBoardWebComponent(): Promise<void> {\n\t\tif (customElements.get(PLANNING_BOARD_TAG)) {\n\t\t\treturn;\n\t\t}\n\t\tconst script = document.createElement('script');\n\t\tconst version = await this.getVersion();\n\t\tscript.src = `${environment.planning_board_url}/static/js/main.js?v=${version}`;\n\t\tdocument.body.appendChild(script);\n\t}\n}\n","import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\nimport { PlanningBoardComponent } from './planning-board/planning-board.component';\nimport { RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { BrowserCompatibilityErrorComponent } from '../../../layouts/browser-compatibility-error/browser-compatibility-error.component';\nimport { SharedModule } from '../../../shared/shared.module';\n\nconst ROUTES = [\n\t{\n\t\tpath: '',\n\t\tcomponent: PlanningBoardComponent,\n\t},\n];\n\n@NgModule({\n\tschemas: [CUSTOM_ELEMENTS_SCHEMA],\n\tdeclarations: [PlanningBoardComponent, BrowserCompatibilityErrorComponent],\n\timports: [\n\t\tRouterModule.forChild(ROUTES),\n\t\tSharedModule,\n\t\tCommonModule,\n\t],\n\texports: [RouterModule],\n})\nexport class PlanningBoardModule {\n}\n"]}