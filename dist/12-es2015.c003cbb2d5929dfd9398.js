(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Ri1m:function(t,e,c){"use strict";c.r(e),c.d(e,"RestorableProjectsModule",(function(){return q}));var n=c("ofXK"),r=c("sYmb"),o=c("TY1r"),i=c("1OTw"),s=c("mrSG"),a=c("9jBU"),l=c("fXoL"),p=c("l7P3"),d=c("xU6T"),u=c("0ZXI"),f=c("IzEk");const b=(t,e)=>(t.lastEditedDate||0)-(e.lastEditedDate||0);var m=c("A2Vd"),g=c("IRfi");let h=(()=>{class t{constructor(t){this.store=t,this.filteredProjects=new l.n,this.currentSortFunction=b,this.searchTerm=""}ngOnChanges(){return Object(s.a)(this,void 0,void 0,(function*(){yield this.emit()}))}setSearchTerm(t){return Object(s.a)(this,void 0,void 0,(function*(){this.searchTerm=t,yield this.emit()}))}load(){return Object(s.a)(this,void 0,void 0,(function*(){return yield this.store.select(a.j,{projectIds:this.allProjects}).pipe(Object(f.a)(1)).toPromise()}))}search(t){return t.filter(t=>this.checkProject(t,this.searchTerm))}sort(t){return t.sort(this.currentSortFunction)}emit(){return Object(s.a)(this,void 0,void 0,(function*(){const t=yield this.load(),e=this.search(t),c=this.sort(e);this.filteredProjects.emit(c.map(t=>t.id))}))}checkProject(t,e){return t.name.toLowerCase().includes(e.toLowerCase())}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(p.h))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-project-search-new"]],inputs:{allProjects:"allProjects"},outputs:{filteredProjects:"filteredProjects"},features:[l.zb],decls:7,vars:3,consts:[[1,"search-wrapper"],["matInput","",3,"placeholder","keyup"],["searchElement",""],[2,"display","none"],["matInput",""]],template:function(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",0),l.Ub(1,"input",1,2),l.gc("keyup",(function(){l.Ec(t);const c=l.Ac(2);return e.setSearchTerm(c.value)})),l.lc(3,"translate"),l.Tb(),l.Ub(4,"div",3),l.Ub(5,"mat-form-field"),l.Pb(6,"input",4),l.Tb(),l.Tb(),l.Tb()}2&t&&(l.Bb(1),l.rc("placeholder",l.mc(3,1,"widgets.search.placeholder")))},directives:[m.b,g.b],pipes:[r.d],styles:["input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:none;background-color:var(--filter-btn-background-color);color:var(--filter-font-color);padding:10px 8px;border-radius:4px;height:40px;font-size:14px}.search-wrapper[_ngcontent-%COMP%]{margin:6px 0}"]}),t})();var j=c("+J/9"),_=c("itXk"),O=c("lJxs"),v=c("gEt1");let x=(()=>{class t{transform(t){switch(t.colorTag){case"COLOR1":return"tag-red";case"COLOR2":return"tag-orange";case"COLOR3":return"tag-yellow";case"COLOR4":return"tag-green";case"COLOR5":return"tag-purple";case"COLOR6":return"tag-blue";case"COLOR7":return"tag-teal";case"COLOR8":return"tag-pink";case"COLOR9":return"tag-dirty-green";case"COLOR10":default:return"tag-royal-blue"}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=l.Nb({name:"projectIconColor",type:t,pure:!0}),t})(),P=(()=>{class t{transform(t){let e="";return t.street&&(e+=t.street+", "),t.zipcode&&(e+=t.zipcode+" "),t.city&&(e+=" "+t.city),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=l.Nb({name:"projectAddress",type:t,pure:!0}),t})();function y(t,e){1&t&&l.Qb(0)}const C=function(t){return{project:t}};function T(t,e){if(1&t&&(l.Sb(0),l.Nc(1,y,1,0,"ng-container",7),l.Rb()),2&t){const t=l.kc().ngIf;l.kc();const e=l.Ac(3);l.Bb(1),l.rc("ngTemplateOutlet",e)("ngTemplateOutletContext",l.wc(2,C,t.project))}}function w(t,e){if(1&t&&l.Qb(0,11),2&t){l.kc(2);const t=l.Ac(5);l.rc("ngTemplateOutlet",t)}}function I(t,e){1&t&&l.Qb(0)}function k(t,e){1&t&&l.Qb(0)}function U(t,e){if(1&t&&(l.Ub(0,"div",14),l.Pc(1),l.Tb()),2&t){const t=l.kc(2).ngIf;l.Bb(1),l.Qc(t.unreadCount)}}function M(t,e){if(1&t&&(l.Ub(0,"div",12),l.Nc(1,U,2,1,"div",13),l.Tb()),2&t){const t=l.kc().ngIf;l.Bb(1),l.rc("ngIf",t.unreadCount)}}function N(t,e){1&t&&(l.Ub(0,"div",15),l.Ub(1,"mat-icon",16),l.Pc(2,"more_vert"),l.Tb(),l.Tb())}function B(t,e){if(1&t&&(l.Ub(0,"div"),l.Ub(1,"div",4),l.Ub(2,"div",5),l.Nc(3,T,2,4,"ng-container",0),l.Nc(4,w,1,1,"ng-container",6),l.Tb(),l.Nc(5,I,1,0,"ng-container",7),l.Ub(6,"div",8),l.Nc(7,k,1,0,"ng-container",7),l.Tb(),l.Nc(8,M,2,1,"div",9),l.Nc(9,N,3,0,"div",10),l.Tb(),l.Tb()),2&t){const t=e.ngIf,c=l.kc(),n=l.Ac(7);l.Bb(3),l.rc("ngIf","PROJECT"===t.project.projectType),l.Bb(1),l.rc("ngIf","FOLDER"===t.project.projectType),l.Bb(1),l.rc("ngTemplateOutlet",n)("ngTemplateOutletContext",l.wc(8,C,t.project)),l.Bb(2),l.rc("ngTemplateOutlet",c.actions)("ngTemplateOutletContext",c.context),l.Bb(1),l.rc("ngIf",c.displayNotifications),l.Bb(1),l.rc("ngIf",c.hasMenu)}}function z(t,e){if(1&t&&(l.Ub(0,"div",17),l.lc(1,"projectIconColor"),l.Pc(2),l.lc(3,"uppercase"),l.Tb()),2&t){const t=e.project;l.rc("ngClass",l.mc(1,2,t)),l.Bb(2),l.Qc(l.mc(3,4,t.name[0]))}}function L(t,e){1&t&&(l.Ub(0,"mat-icon",18),l.Pc(1,"folder"),l.Tb())}function R(t,e){if(1&t&&(l.Ub(0,"div",19),l.Ub(1,"div",20),l.Pc(2),l.Tb(),l.Ub(3,"div",21),l.Pc(4),l.Tb(),l.Ub(5,"div",22),l.Pc(6),l.lc(7,"projectAddress"),l.Tb(),l.Tb()),2&t){const t=e.project;l.Bb(2),l.Qc(t.name),l.Bb(2),l.Qc(t.orderNumber),l.Bb(2),l.Qc(l.mc(7,3,t))}}let S=(()=>{class t{constructor(t,e){this.store=t,this.cdr=e,this.userId$=this.store.select(v.r),this.hasMenu=!1}get context(){return{project:this.projectId}}getAddressText(t){let e="";return t.billingStreet&&(e+=t.billingStreet+", "),t.billingZipcode&&(e+=t.billingZipcode+" "),t.billingCity&&(e+=" "+t.billingCity),e}ngOnChanges(){this.setState()}ngAfterContentInit(){this.hasMenu=!!this.menu,this.cdr.detectChanges()}setState(){const t=this.store.select(a.e,{projectId:this.projectId});this.projectItemState$=Object(_.b)([t,this.userId$]).pipe(Object(O.a)(([t,e])=>{let c=null;return e&&t.unreadCounts&&t.unreadCounts[e]&&(c=t.unreadCounts[e]),{project:t,active:this.active,unreadCount:c}}))}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(p.h),l.Ob(l.h))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-project-item-2"]],inputs:{projectId:"projectId",active:"active",actions:"actions",menu:"menu",displayNotifications:"displayNotifications"},features:[l.zb],decls:8,vars:3,consts:[[4,"ngIf"],["projectIcon",""],["folderIcon",""],["projectItemTextinfo",""],[1,"project-item","d-flex","montserrat-text-light"],[1,"project-item__icon","d-flex","h-100"],[3,"ngTemplateOutlet",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"project-item__action-icons","flex-grow-1"],["class","project-item__notification-icons",4,"ngIf"],["class","pr-3 pointer",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"project-item__notification-icons"],["class","project-item__notification-icons__unread",4,"ngIf"],[1,"project-item__notification-icons__unread"],[1,"pr-3","pointer"],[1,"more-vert","grey-icon"],[1,"project-item__icon__project",3,"ngClass"],[1,"grey-icon"],[1,"project-item__text-info"],[1,"project-item__text-info__name"],[1,"project-item__text-info__id"],[1,"project-item__text-info__address"]],template:function(t,e){1&t&&(l.Nc(0,B,10,10,"div",0),l.lc(1,"async"),l.Nc(2,z,4,6,"ng-template",null,1,l.Oc),l.Nc(4,L,2,0,"ng-template",null,2,l.Oc),l.Nc(6,R,8,5,"ng-template",null,3,l.Oc)),2&t&&l.rc("ngIf",l.mc(1,1,e.projectItemState$))},directives:[n.p,n.u,o.a,n.n],pipes:[n.b,x,n.z,P],styles:[".project-item[_ngcontent-%COMP%]{width:355px;height:104px;background-color:#fff;border-radius:4px;padding:20px 16px 20px 0;color:#000}.project-item__icon[_ngcontent-%COMP%]{width:70px;padding:0 10px;text-align:center;vertical-align:middle;line-height:50px;color:#fff;font-size:18px}.project-item__icon__project[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:25px}.project-item__text-info[_ngcontent-%COMP%]{width:200px}.project-item__text-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.project-item__text-info__name[_ngcontent-%COMP%]{font-weight:700;font-size:18px}.project-item__text-info__id[_ngcontent-%COMP%]{font-weight:700;font-size:14px}.project-item__text-info__address[_ngcontent-%COMP%]{font-size:12px}.project-item[_ngcontent-%COMP%]   .more-vert[_ngcontent-%COMP%]{font-size:30px}.project-item__action-icons[_ngcontent-%COMP%]{overflow:hidden}.project-item__notification-icons[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:18px;height:18px}.project-item__notification-icons__unread[_ngcontent-%COMP%]{border-radius:calc(18px / 2);font-size:10px;text-align:center;vertical-align:middle;line-height:18px;color:#fff;background-color:var(--app-primary)}.project-item[_ngcontent-%COMP%]   .grey-icon[_ngcontent-%COMP%]{color:#9e9e9e}"],changeDetection:0}),t})();const E=["actions"],Q=["menu"];function A(t,e){if(1&t&&(l.Ub(0,"div",5),l.Pb(1,"app-project-item-2",6),l.Tb()),2&t){const t=e.$implicit,c=l.kc();l.Bb(1),l.rc("displayNotifications",c.displayNotifications)("projectId",t)("actions",c.actions)("menu",c.menu)}}let F=(()=>{class t{constructor(t,e){this.store=t,this.cdr=e,this.projects=[],this.filteredProjects=[],this.hasMenu=!1}ngAfterContentInit(){this.hasMenu=!!this.menu,this.cdr.detectChanges()}setFilteredProjects(t){this.filteredProjects=t}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(p.h),l.Ob(l.h))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-projects-list"]],contentQueries:function(t,e,c){var n;1&t&&(l.Hb(c,E,!0,l.L),l.Hb(c,Q,!0,l.L)),2&t&&(l.zc(n=l.hc())&&(e.actions=n.first),l.zc(n=l.hc())&&(e.menu=n.first))},inputs:{projectSelector:"projectSelector",displayNotifications:"displayNotifications",projects:"projects"},decls:5,vars:2,consts:[[1,"h-100","d-flex","flex-column"],[3,"allProjects","filteredProjects"],[1,"project-items--container","d-flex","flex-grow-1"],["itemSize","136","minBufferPx","200","maxBufferPx","400",1,"flex-grow-1"],["class","my-3",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"my-3"],[3,"displayNotifications","projectId","actions","menu"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"app-project-search-new",1),l.gc("filteredProjects",(function(t){return e.setFilteredProjects(t)})),l.Tb(),l.Ub(2,"div",2),l.Ub(3,"cdk-virtual-scroll-viewport",3),l.Nc(4,A,2,4,"div",4),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Bb(1),l.rc("allProjects",e.projects),l.Bb(3),l.rc("cdkVirtualForOf",e.filteredProjects))},directives:[h,j.d,j.a,j.c,S],styles:[".project-items--container[_ngcontent-%COMP%]{min-width:350px;overflow:scroll;scrollbar-width:none}.project-items--container[_ngcontent-%COMP%]::-webkit-scrollbar, .project-items--container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]}),t})();function $(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",10),l.Ub(1,"mat-icon",11),l.gc("click",(function(){l.Ec(t);const c=e.project;return l.kc().restoreProject(c)})),l.Pc(2,"restore"),l.Tb(),l.Tb()}}let D=(()=>{class t{constructor(t,e){this.store=t,this.projectsService=e,this.initProjects()}initProjects(){this.projects$=this.store.select(a.d)}restoreProject(t){return Object(s.a)(this,void 0,void 0,(function*(){yield this.projectsService.restoreProject(t)}))}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(p.h),l.Ob(d.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-restorable-projects"]],decls:18,vars:13,consts:[[1,"d-flex","flex-column","h-100"],["backNavigationRoute","/settings"],[1,"d-flex","flex-grow-1"],[3,"projects","displayNotifications"],["class","project-item__action-items h-100 d-flex flex-column justify-content-center"],["actions",""],[1,"pt-5","h-100","w-100","d-flex","flex-column","align-items-center","cn-restore-hints"],["alt","Hint Icon","src","assets/images/icons/empty-state-dirk.svg",1,"img-fluid"],[1,"text-uppercase","cn-restore-hints__primary"],[1,"cn-restore-hints__secondary"],[1,"h-100","d-flex","flex-column","justify-content-center","align-items-end"],[1,"pointer",3,"click"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"app-settings-page-header",1),l.Pc(2),l.lc(3,"translate"),l.Tb(),l.Ub(4,"div",2),l.Ub(5,"app-projects-list",3),l.lc(6,"async"),l.Nc(7,$,3,0,"ng-template",4,5,l.Oc),l.Tb(),l.Ub(9,"div",6),l.Ub(10,"div"),l.Pb(11,"img",7),l.Tb(),l.Ub(12,"div",8),l.Pc(13),l.lc(14,"translate"),l.Tb(),l.Ub(15,"div",9),l.Pc(16),l.lc(17,"translate"),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Bb(2),l.Qc(l.mc(3,5,"restorableProjects.title")),l.Bb(3),l.rc("projects",l.mc(6,7,e.projects$))("displayNotifications",!1),l.Bb(8),l.Qc(l.mc(14,9,"restorableProjects.hint-1")),l.Bb(3),l.Rc("",l.mc(17,11,"restorableProjects.hint-2")," "))},directives:[u.a,F,o.a],pipes:[r.d,n.b],styles:[".cn-restore-hints__primary[_ngcontent-%COMP%]{color:var(--app-primary);font-size:16px;font-weight:700}.cn-restore-hints__secondary[_ngcontent-%COMP%]{color:var(--color)}"]}),t})();var V=c("9jGm"),J=c("tyNb"),X=c("vkgz"),H=c("zkpo");let Z=(()=>{class t{constructor(t,e){this.actions=t,this.projectsService=e,this.loadDeletedProjectsEffect$=this.actions.pipe(Object(V.d)(H.c),Object(X.a)(t=>{console.log("Loading deleted projects"),this.projectsService.initWatchDeletedProjects()}))}ngrxOnInitEffects(){return Object(H.c)()}}return t.\u0275fac=function(e){return new(e||t)(l.cc(V.a),l.cc(d.a))},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac}),Object(s.b)([Object(V.b)({dispatch:!1}),Object(s.c)("design:type",Object)],t.prototype,"loadDeletedProjectsEffect$",void 0),t})();var G=c("NRBi");let K=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[n.c,j.f,o.b,m.c,g.d,r.c,G.a]]}),t})();var Y=c("8NVz");const W=[{path:"",component:D}];let q=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[J.l.forChild(W),n.c,r.c,o.b,i.b,j.f,K,Y.a,V.c.forFeature([Z])]]}),t})()}}]);