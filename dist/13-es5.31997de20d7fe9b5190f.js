!function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,c=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(s){c=!0,r=s}finally{try{i||null==o.return||o.return()}finally{if(c)throw r}}return n}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{jA6l:function(e,r,a){"use strict";a.r(r),a.d(r,"SubscriptionModule",(function(){return $e}));var o=a("ofXK"),s=a("tyNb"),l=a("mrSG"),d=a("txUS"),p=a("2Vo4"),u=a("XNiG"),b=a("itXk"),g=a("pLZG"),f=a("5+tZ"),h=a("UXun"),m=a("1G5W"),v=a("eIep"),P=a("lJxs"),x=a("vkgz"),O=a("ZGuP"),y=a("LCh+"),C=a("ZFx6"),T=a("SnNG"),U=a("gEt1"),_=a("l7P3"),I=Object(_.n)("[Products] Load Products"),M=Object(_.n)("[Products] Set Products",Object(_.s)()),w=Object(_.p)([],Object(_.r)(M,(function(t,e){return c(e.products)})));function k(t,e){return w(t,e)}var S,B,N,j=Object(_.o)("products"),R=Object(_.q)(j,(function(t){return t.filter((function(t){return t.type===d.ProductType.SUBSCRIPTION}))})),D=Object(_.q)(j,(function(t){return t.filter((function(t){return t.type===d.ProductType.STORAGE_UPGRADE}))})),E=Object(_.q)(j,(function(t){return t.filter((function(t){return t.type===d.ProductType.SUBSCRIPTION||t.type===d.ProductType.TRIAL}))})),z=a("fXoL"),A=a("LcAk"),G=a("TY1r"),$=a("R1ws"),L=a("j14s"),Q=["*",[["mat-card-footer"]]],F=["*","mat-card-footer"],V=((B=function t(e){i(this,t),this._animationMode=e}).\u0275fac=function(t){return new(t||B)(z.Ob($.a,8))},B.\u0275cmp=z.Ib({type:B,selectors:[["mat-card"]],hostAttrs:[1,"mat-card"],hostVars:2,hostBindings:function(t,e){2&t&&z.Gb("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:F,decls:2,vars:0,template:function(t,e){1&t&&(z.qc(Q),z.pc(0),z.pc(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}@media (-ms-high-contrast:active){.mat-card{outline:solid 1px}}.mat-card-actions,.mat-card-content,.mat-card-subtitle{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media (max-width:599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card-content>:first-child,.mat-card>:first-child{margin-top:0}.mat-card-content>:last-child:not(.mat-card-footer),.mat-card>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-subtitle:not(:first-child),.mat-card-title:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),B),W=((S=function t(){i(this,t)}).\u0275mod=z.Mb({type:S}),S.\u0275inj=z.Lb({factory:function(t){return new(t||S)},imports:[[L.k],L.k]}),S),q=a("sYmb"),H=((N=function t(){i(this,t)}).\u0275fac=function(t){return new(t||N)},N.\u0275cmp=z.Ib({type:N,selectors:[["app-storage-option-card"]],inputs:{product:"product"},decls:18,vars:14,consts:[[1,"mt-3","mat-elevation-z0"],[1,"w-100","d-flex","justify-content-center","icon-container"],[3,"src"],[1,"d-flex","flex-column","align-items-center","w-100","montserrat-text-light"],[1,"font-weight-bold","text-size-3","mt-3"],[1,"font-weight-bold","text-size-3","primary-color-text","mt-2"],[1,"grey","font-weight-bold","text-size-2","mt-4"],[1,"grey","text-size-0","mt-1"],[1,"text-size-1","font-weight-bold","primary-color-text","mt-3"]],template:function(t,e){1&t&&(z.Ub(0,"mat-card",0),z.Ub(1,"div",1),z.Pb(2,"img",2),z.Tb(),z.Ub(3,"div",3),z.Ub(4,"span",4),z.Pc(5),z.Tb(),z.Ub(6,"span",5),z.Pc(7),z.lc(8,"translate"),z.Tb(),z.Ub(9,"span",6),z.Pc(10),z.Tb(),z.Ub(11,"span",7),z.Pc(12),z.lc(13,"translate"),z.Tb(),z.Ub(14,"span",8),z.Pc(15),z.lc(16,"uppercase"),z.lc(17,"translate"),z.Tb(),z.Tb(),z.Tb()),2&t&&(z.Bb(2),z.rc("src","assets/images/icons/storage/"+e.product.shortName+"-storage.svg",z.Gc),z.Bb(3),z.Qc(e.product.shortName),z.Bb(2),z.Qc(z.mc(8,6,"storageUpgrade.size."+e.product.shortName)),z.Bb(3),z.Rc("",e.product.plans[0].costPerUser.EUR,"\u20ac"),z.Bb(2),z.Qc(z.mc(13,8,"storageUpgrade.perYear")),z.Bb(3),z.Qc(z.mc(16,10,z.mc(17,12,"storageUpgrade.comingSoon"))))},directives:[V],pipes:[q.d,o.z],styles:["mat-card[_ngcontent-%COMP%]{height:400px;border-radius:24px}mat-card[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{height:100px}mat-card[_ngcontent-%COMP%]   .text-size-3[_ngcontent-%COMP%]{font-size:32px}mat-card[_ngcontent-%COMP%]   .text-size-2[_ngcontent-%COMP%]{font-size:24px}mat-card[_ngcontent-%COMP%]   .text-size-1[_ngcontent-%COMP%]{font-size:16px}mat-card[_ngcontent-%COMP%]   .text-size-0[_ngcontent-%COMP%]{font-size:14px}mat-card[_ngcontent-%COMP%]   .primary-color-text[_ngcontent-%COMP%]{color:var(--app-primary)}mat-card[_ngcontent-%COMP%]   .grey[_ngcontent-%COMP%]{color:#2c211d}"]}),N);function Y(t,e){if(1&t&&(z.Ub(0,"div",8),z.Pb(1,"app-storage-option-card",9),z.Tb()),2&t){var n=e.$implicit;z.Bb(1),z.rc("product",n)}}var Z,K=((Z=function(){function t(e,n){i(this,t),this.store=e,this.dialogRef=n,this.initProducts()}return n(t,[{key:"close",value:function(){this.dialogRef.close()}},{key:"initProducts",value:function(){this.storageUpgradeProducts$=this.store.select(D).pipe(Object(P.a)((function(t){var e=c(t);return e.sort((function(t,e){return t.grade-e.grade})),e})))}}]),t}()).\u0275fac=function(t){return new(t||Z)(z.Ob(_.h),z.Ob(A.g))},Z.\u0275cmp=z.Ib({type:Z,selectors:[["app-storage-options-dialog"]],decls:15,vars:9,consts:[[1,"pointer","d-flex","justify-content-start","align-items-center",3,"click"],[1,"montserrat-text","ml-1","hint"],[1,"container","card-container"],[1,"row"],["class","col-4",4,"ngFor","ngForOf"],[1,"row","mt-3"],[1,"w-100","d-flex","justify-content-center"],[1,"montserrat-text-light"],[1,"col-4"],[3,"product"]],template:function(t,e){1&t&&(z.Ub(0,"div",0),z.gc("click",(function(){return e.close()})),z.Ub(1,"mat-icon"),z.Pc(2,"close"),z.Tb(),z.Ub(3,"span",1),z.Pc(4),z.lc(5,"translate"),z.Tb(),z.Tb(),z.Ub(6,"div",2),z.Ub(7,"div",3),z.Nc(8,Y,2,1,"div",4),z.lc(9,"async"),z.Tb(),z.Ub(10,"div",5),z.Ub(11,"div",6),z.Ub(12,"span",7),z.Pc(13),z.lc(14,"translate"),z.Tb(),z.Tb(),z.Tb(),z.Tb()),2&t&&(z.Bb(4),z.Qc(z.mc(5,3,"storageUpgrade.cancel")),z.Bb(4),z.rc("ngForOf",z.mc(9,5,e.storageUpgradeProducts$)),z.Bb(5),z.Qc(z.mc(14,7,"storageUpgrade.hint")))},directives:[G.a,o.o,H],pipes:[q.d,o.b],styles:[".hint[_ngcontent-%COMP%]{line-height:16px;font-size:16px}.card-container[_ngcontent-%COMP%]{width:1000px}"]}),Z),X=a("wd/R"),J=a.n(X),tt=a("SYtq"),et=a("gVAj"),nt=a("IUeq"),it=a("1KTt"),ct=a("ZZO6"),rt=a("egyA"),at=a("p470"),ot=a("HE6z"),st=a("Xlwt"),lt=a("bLhV"),dt=a("BcPx"),pt=a("HELM"),ut=a("xrj2"),bt=a("mLDw"),gt=a("6wtU"),ft=a("31NI"),ht=a("3Pt+"),mt=a("Quzu"),vt=a("G/Ji");function Pt(t,e){1&t&&(z.Ub(0,"div"),z.Pb(1,"mat-spinner",7),z.Tb()),2&t&&(z.Bb(1),z.rc("diameter",26))}var xt,Ot=((xt=function(){function t(e,n,c,r){i(this,t),this.translateService=e,this.productChangeService=n,this.subscriptionChangeTranslationService=c,this.trackingDispatcherService=r,this._selectedPaymentInterval=d.PlanPaymentInterval.MONTHLY,this.locked=!1,this.costText="",this.changeDateText="",this.PlanPaymentInterval=d.PlanPaymentInterval}return n(t,[{key:"getChangeText",value:function(t){var e=t.changeDirection===bt.a.DOWNGRADE?t.subscription.renewalDate:J()().unix(),n=Object(C.s)(t.billingDetails.billing.address.country,t.to.plan,e),i=Object(C.f)(t,n);return this.subscriptionChangeTranslationService.getCostChangeText(t,i,n)}},{key:"getChangeDateText",value:function(t){return this.subscriptionChangeTranslationService.getDateChangeText(t)}},{key:"onConfirm",value:function(){this.trackingDispatcherService.emitTrackingEvent(T.a.SUBSCRIPTION_OVERVIEW_INTERVAL_CONFIRM),!this.locked&&this._paymentIntervalChange&&this.productChangeService.confirmSubscriptionChange(this._paymentIntervalChange)}},{key:"currentlySubscribedInterval",set:function(t){this.selectedPaymentInterval=t}},{key:"selectedPaymentInterval",get:function(){return this._selectedPaymentInterval},set:function(t){this.locked||(this._selectedPaymentInterval=t,this.productChangeService.updatePaymentInterval(this.selectedPaymentInterval))}},{key:"paymentIntervalChange",set:function(t){t&&(t.status!==y.a.PROCESSING?(t.status===y.a.CONFIRMED&&(this.locked=!1),this.costText=this.getChangeText(t),this.changeDateText=this.getChangeDateText(t),this._paymentIntervalChange=t):this.locked=!0)}}]),t}()).\u0275fac=function(t){return new(t||xt)(z.Ob(q.e),z.Ob(rt.a),z.Ob(at.a),z.Ob(gt.a))},xt.\u0275cmp=z.Ib({type:xt,selectors:[["app-manage-payment-interval"]],inputs:{currentlySubscribedInterval:"currentlySubscribedInterval",paymentIntervalChange:"paymentIntervalChange"},decls:18,vars:12,consts:[[1,"wiz-card","mt-2","p-2","pr-4"],["aria-labelledby","example-radio-group-label",1,"example-radio-group",3,"ngModel","ngModelChange"],[1,"d-flex","flex-column","align-items-start","p-4"],[1,"pb-2"],["color","primary",3,"value"],[3,"locked","confirmed"],["spinner",""],[3,"diameter"]],template:function(t,e){1&t&&(z.Ub(0,"div",0),z.Ub(1,"mat-radio-group",1),z.gc("ngModelChange",(function(t){return e.selectedPaymentInterval=t})),z.Ub(2,"div",2),z.Ub(3,"div",3),z.Ub(4,"mat-radio-button",4),z.Pc(5),z.lc(6,"translate"),z.Tb(),z.Tb(),z.Ub(7,"div",3),z.Ub(8,"mat-radio-button",4),z.Pc(9),z.lc(10,"translate"),z.Tb(),z.Tb(),z.Ub(11,"div"),z.Pc(12),z.Tb(),z.Ub(13,"div"),z.Pc(14),z.Tb(),z.Tb(),z.Tb(),z.Ub(15,"app-confirm-button",5),z.gc("confirmed",(function(){return e.onConfirm()})),z.Tb(),z.Tb(),z.Nc(16,Pt,2,1,"ng-template",null,6,z.Oc)),2&t&&(z.Bb(1),z.rc("ngModel",e.selectedPaymentInterval),z.Bb(3),z.rc("value",e.PlanPaymentInterval.YEARLY),z.Bb(1),z.Rc(" ",z.mc(6,8,"subscription.billingPeriod.yearly.title")," "),z.Bb(3),z.rc("value",e.PlanPaymentInterval.MONTHLY),z.Bb(1),z.Rc(" ",z.mc(10,10,"subscription.billingPeriod.monthly.title")," "),z.Bb(3),z.Qc(e.costText),z.Bb(2),z.Qc(e.changeDateText),z.Bb(1),z.rc("locked",e.locked))},directives:[ft.c,ht.q,ht.t,ft.b,mt.a,vt.b],pipes:[q.d],styles:[".wiz-card-outer-wrapper[_ngcontent-%COMP%]{overflow:auto;max-height:100vh}.wiz-card-outer[_ngcontent-%COMP%]{height:750px;width:1070px;padding:15px;border-radius:32px;background-color:var(--background-color-offset)}.wiz-card[_ngcontent-%COMP%]{border-radius:24px;background:var(--overview-background);margin-top:22px;padding:22px 32px 10px 23px;height:100%;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start}.wiz-field[_ngcontent-%COMP%]{height:56px;width:484px;border-radius:8px;background-color:#34180e}.wiz-text[_ngcontent-%COMP%]{height:32px;width:216px;color:#000;font-family:Montserrat sans-serif;font-weight:700}.step-header[_ngcontent-%COMP%], .wiz-text[_ngcontent-%COMP%]{font-size:24px;line-height:32px}.wiz-input[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:16px;border-width:2px;border-radius:8px;border-style:solid;max-width:484px;height:56px}.wiz-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;width:100%;font-family:Montserrat,sans-serif;font-size:16px;font-weight:700;line-height:24px;opacity:.6;color:var(--color);outline:none}.payment-input[_ngcontent-%COMP%]   .wiz-input-headline[_ngcontent-%COMP%]{display:none!important}#payment-method-step[_ngcontent-%COMP%]   .wiz-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:sans-serif;opacity:1;font-weight:unset;color:#000}.wiz-short-input[_ngcontent-%COMP%]{width:35px!important}.wiz-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline-width:0}.invalid-field[_ngcontent-%COMP%]{border-color:#d8110d}mat-icon.valid[_ngcontent-%COMP%]{color:green!important}mat-icon.invalid[_ngcontent-%COMP%]{color:#d8110d}.confirmation-input[_ngcontent-%COMP%]{width:200px}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.wiz-payment-methods[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#ff5c20;margin-right:20px}.wiz-payment-details-container[_ngcontent-%COMP%]{width:500px}.wiz-multiline-block[_ngcontent-%COMP%]{text-align:right;line-height:1}.mat-spinner[_ngcontent-%COMP%]{margin-right:5px}.mat-spinner[_ngcontent-%COMP%]     circle{stroke:#fff}.mat-spinner.small-spinner[_ngcontent-%COMP%]     circle{stroke:#000}.wiz-payment-method-status[_ngcontent-%COMP%]{padding-top:15px}.wiz-payment-method-status[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:green;vertical-align:middle}.wiz-coupon-hint[_ngcontent-%COMP%]{font-size:.9em;color:#e40c0c}.wiz-coupon-cost-text[_ngcontent-%COMP%]{min-width:200px;display:inline-block;text-align:right}.terms-link[_ngcontent-%COMP%]{font-weight:700}.vertical-center[_ngcontent-%COMP%]{display:flex;align-items:center}.line-through[_ngcontent-%COMP%]{text-decoration:line-through}.payment-method-created-icon[_ngcontent-%COMP%]{font-size:3em}.payment-input[_ngcontent-%COMP%]{background-color:var(--background-color-for-dark-text-input)}.sepa-checkbox-container[_ngcontent-%COMP%]{margin-top:25px;height:60px;padding-left:15px}.trust-badge[_ngcontent-%COMP%]   #ssl-badge[_ngcontent-%COMP%]{height:60px}.trust-badge[_ngcontent-%COMP%]   #dsgvo-badge[_ngcontent-%COMP%]{height:81px}.trust-badge[_ngcontent-%COMP%]   #refund-badge[_ngcontent-%COMP%]{height:87px}.manage-interval-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:24px}"]}),xt);function yt(t,e){if(1&t){var n=z.Vb();z.Ub(0,"span",23),z.gc("click",(function(){z.Ec(n);var t=z.kc(2).ngIf;return z.kc().undoCancellation(t.subscription)})),z.Pc(1),z.lc(2,"translate"),z.Tb()}2&t&&(z.Bb(1),z.Qc(z.mc(2,1,"subscription.undo")))}function Ct(t,e){if(1&t&&(z.Ub(0,"div",7),z.Ub(1,"div",21),z.Pc(2),z.Nc(3,yt,3,3,"span",22),z.lc(4,"async"),z.Tb(),z.Tb()),2&t){var n=z.kc().ngIf,i=z.kc();z.Bb(2),z.Rc(" ",i.getRenewalText(n)," "),z.Bb(1),z.rc("ngIf",(null==n.subscription.nextState?null:n.subscription.nextState.planId)!==n.subscription.currentState.planId&&!z.mc(4,2,i.isTrial$))}}var Tt=function(t,e){return{used:t,available:e}};function Ut(t,e){if(1&t&&(z.Ub(0,"div",25),z.Ub(1,"div",10),z.Ub(2,"div",7),z.Ub(3,"div",8),z.Ub(4,"div",7),z.Ub(5,"div",26),z.Pc(6),z.lc(7,"translate"),z.Tb(),z.Ub(8,"div",27),z.Pc(9),z.lc(10,"translate"),z.Tb(),z.Tb(),z.Tb(),z.Ub(11,"div",10),z.Pb(12,"mat-progress-bar",28),z.Tb(),z.Tb(),z.Tb(),z.Tb()),2&t){var n=z.kc(2).ngIf,i=z.kc();z.Bb(6),z.Qc(z.mc(7,3,"subscription.storage.title")),z.Bb(3),z.Rc("",z.nc(10,5,"subscription.usedStorage",z.xc(8,Tt,i.getGbString(n.storageData.usedGbs),i.getGbString(n.storageData.availableGbs)))," "),z.Bb(3),z.rc("value",n.storageData.gbPercentage)}}function _t(t,e){if(1&t&&(z.Ub(0,"div",10),z.Nc(1,Ut,13,11,"div",24),z.Tb()),2&t){var n=z.kc().ngIf;z.Bb(1),z.rc("ngIf",n.companyLimits)}}function It(t,e){if(1&t&&(z.Pb(0,"app-manage-company-employees",39),z.lc(1,"async")),2&t){var n=z.kc(2).ngIf,i=z.kc();z.rc("employeeChanges",z.mc(1,2,i.employeesChange$))("subscribedEmployees",n.subscription)}}function Mt(t,e){1&t&&(z.Ub(0,"mat-icon"),z.Pc(1,"edit"),z.Tb())}function wt(t,e){1&t&&(z.Ub(0,"mat-icon"),z.Pc(1,"close"),z.Tb())}function kt(t,e){if(1&t){var n=z.Vb();z.Ub(0,"div",29),z.Ub(1,"div",10),z.Ub(2,"div",30),z.Ub(3,"div",7),z.Ub(4,"div",26),z.Pc(5),z.lc(6,"translate"),z.Tb(),z.Ub(7,"div",14),z.Ub(8,"div",31),z.Ub(9,"div",32),z.Pc(10),z.Tb(),z.Pb(11,"div",33),z.Ub(12,"div",34),z.Pc(13),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Nc(14,It,2,4,"app-manage-company-employees",35),z.Tb(),z.Tb(),z.Ub(15,"div",36),z.Ub(16,"div",37),z.gc("click",(function(){return z.Ec(n),z.kc(2).toggleEditUser()})),z.Nc(17,Mt,2,0,"mat-icon",38),z.Nc(18,wt,2,0,"mat-icon",38),z.Tb(),z.Tb(),z.Tb()}if(2&t){var i=z.kc().ngIf,c=z.kc();z.Bb(5),z.Qc(z.mc(6,7,"subscription.licensesNumber.title")),z.Bb(5),z.Qc(i.numberOfUsers),z.Bb(3),z.Qc(c.getLicensesChangeText(i.subscription)),z.Bb(1),z.rc("ngIf",c.editUser),z.Bb(2),z.rc("appTrack",c.editUser?c.TrackEventType.SUBSCRIPTION_OVERVIEW_LICENSES_CLOSE:c.TrackEventType.SUBSCRIPTION_OVERVIEW_LICENSES_OPEN),z.Bb(1),z.rc("ngIf",!c.editUser),z.Bb(1),z.rc("ngIf",c.editUser)}}function St(t,e){1&t&&(z.Ub(0,"div",45),z.Pc(1),z.lc(2,"translate"),z.Tb()),2&t&&(z.Bb(1),z.Qc(z.mc(2,1,"subscription.billingPeriod.discount")))}function Bt(t,e){if(1&t&&(z.Pb(0,"app-manage-payment-interval",46),z.lc(1,"async")),2&t){var n=z.kc(2).ngIf,i=z.kc();z.rc("currentlySubscribedInterval",n.plan.paymentInterval)("paymentIntervalChange",z.mc(1,2,i.paymentIntervalChange$))}}function Nt(t,e){1&t&&(z.Ub(0,"mat-icon"),z.Pc(1,"edit"),z.Tb())}function jt(t,e){1&t&&(z.Ub(0,"mat-icon"),z.Pc(1,"close"),z.Tb())}function Rt(t,e){if(1&t&&(z.Ub(0,"div",47),z.Ub(1,"div",10),z.Ub(2,"div",48),z.Ub(3,"div",12),z.Ub(4,"div",32),z.Ub(5,"div"),z.Pc(6),z.lc(7,"translate"),z.Tb(),z.Ub(8,"div",49),z.Pc(9),z.lc(10,"translate"),z.Tb(),z.Tb(),z.Ub(11,"div",10),z.Ub(12,"div",31),z.Ub(13,"div",32),z.Pc(14),z.Tb(),z.Pb(15,"div",33),z.Ub(16,"div",34),z.Pc(17),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Ub(18,"div",14),z.Pb(19,"div",50),z.Tb(),z.Tb()),2&t){var n=z.kc(2).ngIf;z.Bb(6),z.Qc(z.mc(7,4,"subscription.cost.title")),z.Bb(3),z.Qc(z.mc(10,6,"subscription.cost.vat-hint")),z.Bb(5),z.Qc(n.price),z.Bb(3),z.Qc(n.pricePerUser)}}function Dt(t,e){if(1&t){var n=z.Vb();z.Ub(0,"div",29),z.Ub(1,"div",10),z.Ub(2,"div",30),z.Ub(3,"div",12),z.Ub(4,"div",32),z.Ub(5,"div"),z.Pc(6),z.lc(7,"translate"),z.Tb(),z.Nc(8,St,3,3,"div",40),z.Tb(),z.Ub(9,"div",10),z.Ub(10,"div",31),z.Ub(11,"div",32),z.Pc(12),z.lc(13,"translate"),z.Tb(),z.Pb(14,"div",33),z.Ub(15,"div",34),z.Pc(16),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Nc(17,Bt,2,4,"app-manage-payment-interval",41),z.Tb(),z.Tb(),z.Ub(18,"div",42),z.Ub(19,"div",43),z.gc("click",(function(){return z.Ec(n),z.kc(2).toggleEditPaymentInterval()})),z.Nc(20,Nt,2,0,"mat-icon",38),z.Nc(21,jt,2,0,"mat-icon",38),z.Tb(),z.Tb(),z.Tb(),z.Nc(22,Rt,20,8,"div",44)}if(2&t){var i=z.kc().ngIf,c=z.kc();z.Bb(6),z.Qc(z.mc(7,9,"subscription.billingPeriod.title")),z.Bb(2),z.rc("ngIf",i.plan.paymentInterval===c.PlanPaymentInterval.MONTHLY),z.Bb(4),z.Qc(z.mc(13,11,"subscription.billingPeriod."+i.plan.paymentInterval.toLowerCase()+".title")),z.Bb(4),z.Qc(c.getPaymentIntervalChangeText(i.subscription,i.allProducts)),z.Bb(1),z.rc("ngIf",c.editPaymentInterval),z.Bb(2),z.rc("appTrack",c.editPaymentInterval?c.TrackEventType.SUBSCRIPTION_OVERVIEW_INTERVAL_CLOSE:c.TrackEventType.SUBSCRIPTION_OVERVIEW_INTERVAL_OPEN),z.Bb(1),z.rc("ngIf",!c.editPaymentInterval),z.Bb(1),z.rc("ngIf",c.editPaymentInterval),z.Bb(1),z.rc("ngIf",i.billingDetails)}}function Et(t,e){if(1&t&&(z.Ub(0,"div",27),z.Pc(1),z.lc(2,"translate"),z.Tb()),2&t){var n=e.ngIf;z.Bb(1),z.Rc("",z.mc(2,1,"subscription.paymentMethod."+n)," ")}}function zt(t,e){if(1&t&&(z.Ub(0,"div",51),z.Ub(1,"div",9),z.Ub(2,"div",7),z.Ub(3,"div",32),z.Pc(4),z.lc(5,"translate"),z.Tb(),z.Ub(6,"div",10),z.Ub(7,"div",31),z.Ub(8,"div",27),z.Pc(9),z.Tb(),z.Pb(10,"div",33),z.Ub(11,"div",27),z.Pc(12),z.Tb(),z.Pb(13,"div",33),z.Ub(14,"div",27),z.Pc(15),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Ub(16,"div",51),z.Ub(17,"div",9),z.Ub(18,"div",7),z.Ub(19,"div",32),z.Pc(20),z.lc(21,"translate"),z.Tb(),z.Ub(22,"div",10),z.Ub(23,"div",31),z.Nc(24,Et,3,3,"div",52),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Tb()),2&t){var n=z.kc().ngIf;z.Bb(4),z.Qc(z.mc(5,6,"subscription.billingDetails")),z.Bb(5),z.Qc(null==n.billingDetails?null:n.billingDetails.billing.email),z.Bb(3),z.Qc(null==n.billingDetails?null:n.billingDetails.billing.company),z.Bb(3),z.Qc(null==n.billingDetails?null:n.billingDetails.billing.address.line1),z.Bb(5),z.Qc(z.mc(21,8,"subscription.paymentMethod.title")),z.Bb(4),z.rc("ngIf",n.billingDetails.paymentMethod)}}function At(t,e){if(1&t){var n=z.Vb();z.Ub(0,"div",7),z.Ub(1,"div",8),z.Ub(2,"div",9),z.Ub(3,"div",7),z.Ub(4,"div",10),z.Ub(5,"div",7),z.Ub(6,"div",11),z.Pc(7),z.lc(8,"translate"),z.Tb(),z.Tb(),z.Ub(9,"div",12),z.Ub(10,"div",13),z.Pc(11),z.Tb(),z.Tb(),z.Nc(12,Ct,5,4,"div",6),z.Tb(),z.Ub(13,"div",14),z.Ub(14,"button",15),z.Pc(15),z.lc(16,"translate"),z.Tb(),z.Tb(),z.Tb(),z.Ub(17,"div",7),z.Nc(18,_t,2,1,"ng-template",16),z.Ub(19,"div",17),z.Ub(20,"div",18),z.gc("click",(function(){return z.Ec(n),z.kc().openStorageOptions()})),z.Pc(21),z.lc(22,"translate"),z.Tb(),z.Tb(),z.Tb(),z.Nc(23,kt,19,9,"div",19),z.lc(24,"async"),z.Nc(25,Dt,23,13,"ng-template",20),z.lc(26,"async"),z.Tb(),z.Tb(),z.Nc(27,zt,25,10,"ng-template",20),z.Tb()}if(2&t){var i=e.ngIf,c=z.kc();z.Bb(7),z.Qc(z.mc(8,9,"subscription.title")),z.Bb(4),z.Qc(i.product.name),z.Bb(1),z.rc("ngIf",i.subscription),z.Bb(2),z.rc("appTrack",c.TrackEventType.SUBSCRIPTION_OVERVIEW_AVAILABLE_SUBSCRIPTIONS),z.Bb(1),z.Rc(" ",z.mc(16,11,"subscription.available")," "),z.Bb(6),z.Qc(z.mc(22,13,"subscription.upgradeStorage")),z.Bb(2),z.rc("ngIf",i.numberOfUsers&&!z.mc(24,15,c.isTrial$)),z.Bb(2),z.rc("ngIf",i.subscription&&!z.mc(26,17,c.isTrial$)),z.Bb(2),z.rc("ngIf",i.billingDetails)}}var Gt,$t=((Gt=function(){function e(t,n,c,r,a,o,s,l,b,g,f,h){i(this,e),this.subscriptionService=t,this.companyService=n,this.authService=c,this.profileService=r,this.productService=a,this.productChangeService=o,this.subscriptionChangeTranslationService=s,this.translate=l,this.decimalPipe=b,this.hotjarTrackingService=g,this.dialog=f,this.store=h,this.PlanPaymentInterval=d.PlanPaymentInterval,this.companyLimits$=this.store.select(U.i),this.subscription$=new p.a(null),this.billingDetails$=new p.a(null),this.products$=this.store.select(E),this.editUser=!1,this.editPaymentInterval=!1,this.TrackEventType=T.a,this.onDestroy$=new u.a,this.loading=!0}return n(e,[{key:"ngOnInit",value:function(){this.setupCompany(),this.setupSubscription(),this.setupOverviewData(),this.setupBillingDetails(),this.setupPaymentIntervalChange(),this.setupEmployeesChange(),this.setupTrial()}},{key:"ngOnDestroy",value:function(){this.onDestroy$.next(),this.onDestroy$.complete()}},{key:"setupCompany",value:function(){var t=this,e=this.authService.$authState.pipe(Object(g.a)((function(t){return!!t})),Object(f.a)((function(e){return t.profileService.getProfile(e.uid)})),Object(h.a)());this.company$=e.pipe(Object(f.a)((function(e){return t.companyService.getCompany(e.company)})),Object(h.a)())}},{key:"setupSubscription",value:function(){var t=this;this.subscriptionService.getActiveSubscription().pipe(Object(m.a)(this.onDestroy$)).subscribe((function(e){t.subscription$.next(e)}))}},{key:"setupBillingDetails",value:function(){var e=this;this.subscriptionService.getActiveSubscriptionAndProduct().pipe(Object(g.a)((function(e){var n=t(e,2),i=n[0],c=n[1];return i&&c.type!==d.ProductType.TRIAL})),Object(v.a)((function(n){var i=t(n,1)[0];return e.subscriptionService.getBillingInformation(i.id)})),Object(g.a)((function(t){return!!t})),Object(m.a)(this.onDestroy$)).subscribe((function(t){return e.billingDetails$.next(t)}))}},{key:"setupOverviewData",value:function(){var e=this;this.overviewData$=Object(b.b)([this.company$,this.subscription$,this.companyLimits$,this.products$,this.billingDetails$]).pipe(Object(v.a)((function(n){return Object(l.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var i,r,a,o,s,l,p,u,b,g,f,h,m,v,P,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t(n,5),r=i[0],a=i[1],o=i[2],s=i[3],l=i[4],p=s.filter((function(t){return t.type===d.ProductType.SUBSCRIPTION||t.type===d.ProductType.TRIAL})),u={company:r,product:s.sort((function(t,e){return t.grade-e.grade}))[0],allProducts:s},o&&(b=Lt(r,o),u.companyLimits=o,u.storageData=b),!a){e.next=12;break}if(g=[],s.filter((function(t){return t.plans})).forEach((function(t){return g.push.apply(g,c(t.plans))})),f=g.find((function(t){return t.stripeId===a.currentState.planId})),h=p.find((function(t){return t.plans.find((function(t){return t===f}))})),m=a.currentState.quantity,!l){e.next=11;break}return e.next=9,this.subscriptionService.getOrLoadCouponResponse(f.stripeId);case 9:x=e.sent,v=this.getPrice(m,f,l,x,a.renewalDate),P=this.getPricePerUser(m,f,l,x,a.renewalDate);case 11:u.plan=f,u.product=h,u.allProducts=s,u.price=v,u.pricePerUser=P,u.subscription=a,u.numberOfUsers=m,u.billingDetails=l;case 12:return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})))})))}},{key:"setupPaymentIntervalChange",value:function(){var t=this;this.paymentIntervalChange$=this.productChangeService.getProductChanges().pipe(Object(g.a)((function(t){return t.changeType===O.a.PAYMENT_INTERVAL})),Object(P.a)((function(t){return t})),Object(x.a)((function(e){e.status===y.a.CONFIRMED&&(t.editPaymentInterval=!1)})))}},{key:"setupEmployeesChange",value:function(){var t=this;this.employeesChange$=this.productChangeService.getProductChanges().pipe(Object(g.a)((function(t){return t.changeType===O.a.EMPLOYEES_CHANGE})),Object(P.a)((function(t){return t})),Object(x.a)((function(e){e.status===y.a.CONFIRMED&&(t.editUser=!1)})))}},{key:"getRenewalText",value:function(t){return this.subscriptionChangeTranslationService.getProductChangeText(t.product,t.allProducts,t.subscription)}},{key:"getPrice",value:function(t,e,n,i,c){var r=e.paymentInterval===d.PlanPaymentInterval.MONTHLY?"months":"years",a=J.a.unix(c).subtract(1,r).unix(),o=Object(C.s)(n.billing.address.country,e,a),s=Object(C.e)(e,t,o,{response:i,ignoreValid:!0}),l=e.paymentInterval.toLowerCase(),p=this.subscriptionChangeTranslationService.getCurrencyCostText(s);return this.translate.instant("subscription.cost."+l,{cost:p})}},{key:"getPricePerUser",value:function(t,e,n,i,c){var r=e.paymentInterval.toLowerCase(),a=e.paymentInterval===d.PlanPaymentInterval.MONTHLY?"months":"years",o=J.a.unix(c).subtract(1,a).unix(),s=Object(C.s)(n.billing.address.country,e,o),l=Object(C.e)(e,t,s,{response:i,ignoreValid:!0}),p=Object(C.l)(l,t),u=this.subscriptionChangeTranslationService.getCurrencyCostText(p);return this.translate.instant("subscription.cost.perUser."+r,{cost:u})}},{key:"getGbString",value:function(t){return this.decimalPipe.transform(t,"1.2-2")}},{key:"getPaymentIntervalChangeText",value:function(t,e){return this.subscriptionChangeTranslationService.getPaymentIntervalChangeText(t,e)}},{key:"getLicensesChangeText",value:function(t){return this.subscriptionChangeTranslationService.getLicensesChangeText(t)}},{key:"toggleEditUser",value:function(){this.editUser=!this.editUser}},{key:"toggleEditPaymentInterval",value:function(){this.editPaymentInterval=!this.editPaymentInterval}},{key:"undoCancellation",value:function(t){this.subscriptionService.undoPlanChange(t)}},{key:"setupTrial",value:function(){this.isTrial$=this.overviewData$.pipe(Object(P.a)((function(t){return t.product.type===d.ProductType.TRIAL})))}},{key:"openStorageOptions",value:function(){this.dialog.open(K,{width:"1190px",panelClass:"storage-upgrade-dialog"})}}]),e}()).\u0275fac=function(t){return new(t||Gt)(z.Ob(tt.b),z.Ob(et.a),z.Ob(nt.a),z.Ob(it.a),z.Ob(ct.a),z.Ob(rt.a),z.Ob(at.a),z.Ob(q.e),z.Ob(o.f),z.Ob(ot.a),z.Ob(A.b),z.Ob(_.h))},Gt.\u0275cmp=z.Ib({type:Gt,selectors:[["app-subscription"]],features:[z.Ab([o.f])],decls:9,vars:3,consts:[[1,"row","justify-content-center","h-100","overflow-auto"],[1,"mt-4","col-1"],[1,"row","justify-content-center"],["href","#","routerLink","/settings",1,"col-2","mt-1"],[1,"material-icons"],[1,"col-10","my-4"],["class","row",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"cf-card"],[1,"col"],[1,"col","cf-text","cf-text-1"],[1,"row","align-items-center"],[1,"col-auto","cf-h1"],[1,"col-auto"],["color","primary","routerLink","./products","mat-flat-button","",3,"appTrack"],["appFeatureFlag","feature_company_storage"],[1,"col-auto","upgrade-storage"],[1,"d-flex","mt-1","h-100","align-items-end","pointer",3,"click"],["class","row mt-3",4,"ngIf"],[3,"ngIf"],[1,"col","cf-text","cf-text-2"],["class","undo-link pointer",3,"click",4,"ngIf"],[1,"undo-link","pointer",3,"click"],["class","row align-items-end mt-4",4,"ngIf"],[1,"row","align-items-end","mt-4"],[1,"col","cf-h2"],[1,"col-auto","cf-text","cf-text-1"],["color","primary","mode","determinate",3,"value"],[1,"row","mt-3"],[1,"cf-form-field","lg-pad"],[1,"row","justify-content-end"],[1,"col-auto","cf-h2"],[1,"w-100"],[1,"col-auto","cf-text","cf-text-2"],["fromSubscriptionOverview","true",3,"employeeChanges","subscribedEmployees",4,"ngIf"],[1,"col-auto","pointer","pt-2"],[1,"cf-icon-placeholder",3,"appTrack","click"],[4,"ngIf"],["fromSubscriptionOverview","true",3,"employeeChanges","subscribedEmployees"],["class","cf-text cf-text-2",4,"ngIf"],[3,"currentlySubscribedInterval","paymentIntervalChange",4,"ngIf"],[1,"col-auto","pt-2"],[1,"cf-icon-placeholder","pointer",3,"appTrack","click"],["class","row align-items-center mt-3",4,"ngIf"],[1,"cf-text","cf-text-2"],[3,"currentlySubscribedInterval","paymentIntervalChange"],[1,"row","align-items-center","mt-3"],[1,"cf-form-field","sm-pad"],[1,"w-50","cf-text","cf-text-2"],[1,"cf-icon-placeholder"],[1,"col-12","mt-3"],["class","col-auto cf-text cf-text-1",4,"ngIf"]],template:function(t,e){1&t&&(z.Ub(0,"div",0),z.Ub(1,"div",1),z.Ub(2,"div",2),z.Ub(3,"a",3),z.Ub(4,"i",4),z.Pc(5,"arrow_back"),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Ub(6,"div",5),z.Nc(7,At,28,19,"div",6),z.lc(8,"async"),z.Tb(),z.Tb()),2&t&&(z.Bb(7),z.rc("ngIf",z.mc(8,1,e.overviewData$)))},directives:[s.k,o.p,st.b,s.i,lt.a,dt.a,pt.a,ut.a,G.a,Ot],pipes:[o.b,q.d],styles:[".footerfix[_ngcontent-%COMP%]{padding:0 0 6em;overflow:auto}.settings-other[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{height:24px;width:24px}.delete[_ngcontent-%COMP%]{background:#d12c3f}h2[_ngcontent-%COMP%]{font-size:24px;font-family:Archive,sans-serif}.theme-item[_ngcontent-%COMP%]{font-size:.9em;padding:4px 28px}footer[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;left:0;padding:1rem}.cf-text[_ngcontent-%COMP%]{opacity:.6;color:var(--overview-font);font-family:Montserrat,sans-serif;font-weight:500;font-size:24px;line-height:32px}.cf-text-upcoming[_ngcontent-%COMP%]{opacity:.4}.cf-text-1[_ngcontent-%COMP%]{font-size:16px;line-height:24px}.cf-text-2[_ngcontent-%COMP%]{font-size:12px;line-height:20px}.cf-text-italic[_ngcontent-%COMP%]{font-size:16px;font-style:italic;font-weight:500;line-height:24px}.cf-h1[_ngcontent-%COMP%]{color:var(--overview-font);font-family:Montserrat,sans-serif;font-size:24px;font-weight:700;line-height:32px}.cf-h2[_ngcontent-%COMP%]{color:var(--overview-font)}.cf-button[_ngcontent-%COMP%], .cf-h2[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:16px;font-weight:700;line-height:24px}.cf-button[_ngcontent-%COMP%]{color:#ff5c20;padding:6px 12px}button[mat-flat-button][_ngcontent-%COMP%]{padding:12px 24px;border-radius:24px;font-family:Montserrat,sans-serif;font-size:16px;font-weight:700;line-height:24px}.cf-form-field[_ngcontent-%COMP%]{padding:0 32px;border-radius:16px;background-color:var(--overview-line-background)}.cf-form-field.sm-pad[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px}.cf-form-field.lg-pad[_ngcontent-%COMP%]{padding-top:16px;padding-bottom:16px}.cf-icon-placeholder[_ngcontent-%COMP%]{width:24px}mat-progress-bar[_ngcontent-%COMP%]{margin-top:16px}.mat-spinner[_ngcontent-%COMP%]     circle{stroke:#fff}.spinner-container[_ngcontent-%COMP%]{padding:7px 35px}",".cf-card[_ngcontent-%COMP%]{background:var(--overview-background);border-radius:24px;padding:32px 48px}.undo-link[_ngcontent-%COMP%]{text-decoration:underline;text-underline:var(--overview-font);font-weight:bolder}.upgrade-storage[_ngcontent-%COMP%]{color:var(--app-primary);font-weight:700;font-size:16px}mat-icon[_ngcontent-%COMP%]{color:var(--overview-font)}"]}),Gt),Lt=function(t,e){var n=e.storageGBytes||0,i=(t.storageBytes||0)/1e9;return{availableGbs:n,usedGbs:i,gbPercentage:i/n*100}},Qt=a("MQuO"),Ft=a("IzEk"),Vt=a("0885"),Wt=a("SQ63"),qt=a("GuDp");function Ht(t,e){if(1&t){var n=z.Vb();z.Ub(0,"div",5),z.gc("click",(function(){z.Ec(n);var t=e.index;return z.kc().itemSelected(t)})),z.Pc(1),z.lc(2,"translate"),z.Tb()}if(2&t){var i=e.$implicit,c=e.index,r=z.kc();z.Gb("option-selected",r.selectedToggleIndex===c)("option-unselected",r.selectedToggleIndex!==c),z.Bb(1),z.Rc(" ",z.mc(2,5,i.translateKey)," ")}}var Yt,Zt=((Yt=function(){function t(){i(this,t),this.selected=new z.n}return n(t,[{key:"itemSelected",value:function(t){this.selected.emit(t)}}]),t}()).\u0275fac=function(t){return new(t||Yt)},Yt.\u0275cmp=z.Ib({type:Yt,selectors:[["app-toggle"]],inputs:{items:"items",selectedToggleIndex:"selectedToggleIndex"},outputs:{selected:"selected"},decls:7,vars:4,consts:[[1,"outer-wrapper","d-flex","flex-column","align-items-center"],[1,"wrapper"],[1,"row"],["class","col option",3,"option-selected","option-unselected","click",4,"ngFor","ngForOf"],[1,"pt-2","note"],[1,"col","option",3,"click"]],template:function(t,e){1&t&&(z.Ub(0,"div",0),z.Ub(1,"div",1),z.Ub(2,"div",2),z.Nc(3,Ht,3,7,"div",3),z.Tb(),z.Tb(),z.Ub(4,"div",4),z.Pc(5),z.lc(6,"translate"),z.Tb(),z.Tb()),2&t&&(z.Bb(3),z.rc("ngForOf",e.items),z.Bb(2),z.Rc(" ",z.mc(6,2,"subscription.billingPeriod.twoFreeMonthNote")," "))},directives:[o.o],pipes:[q.d],styles:[".wrapper[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px;border-radius:24px;background:rgba(52,24,14,.4);width:250px}.note[_ngcontent-%COMP%]{opacity:1;color:#ff5722;font-weight:bolder;line-height:20px;width:100%}.note[_ngcontent-%COMP%], .option[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:16px;text-align:center}.option[_ngcontent-%COMP%]{cursor:pointer;padding:8px 24px;font-weight:700;line-height:24px}.option-selected[_ngcontent-%COMP%]{color:#34180e;border-radius:24px;background-color:#f1eeed}.option-unselected[_ngcontent-%COMP%]{color:#fff}"]}),Yt);function Kt(t,e){1&t&&z.Qb(0)}function Xt(t,e){1&t&&z.Qb(0)}function Jt(t,e){if(1&t){var n=z.Vb();z.Ub(0,"div",3),z.Ub(1,"div",4),z.Ub(2,"button",5),z.gc("click",(function(){return z.Ec(n),z.kc().onClick()})),z.Nc(3,Kt,1,0,"ng-container",6),z.Nc(4,Xt,1,0,"ng-container",6),z.Tb(),z.Tb(),z.Tb()}if(2&t){var i=z.kc(),c=z.Ac(2),r=z.Ac(4);z.Bb(3),z.rc("ngIf",i.productChangeType===i.SubscriptionChangeDirection.DOWNGRADE)("ngIfThen",c),z.Bb(1),z.rc("ngIf",i.productChangeType===i.SubscriptionChangeDirection.UPGRADE)("ngIfThen",r)}}function te(t,e){1&t&&(z.Pc(0),z.lc(1,"translate")),2&t&&z.Rc(" ",z.mc(1,1,"subscription.plans.downgrade.title"),"\n")}function ee(t,e){1&t&&(z.Pc(0),z.lc(1,"translate")),2&t&&z.Rc(" ",z.mc(1,1,"subscription.plans.upgrade.title"),"\n")}var ne,ie=((ne=function(){function t(e){i(this,t),this.productChangeService=e,this.allProducts=[],this.SubscriptionChangeDirection=bt.a}return n(t,[{key:"ngOnChanges",value:function(){this.setChangeType()}},{key:"setChangeType",value:function(){var t=Object(C.d)(this.currentProductGrade,this._gradeOfCard);if(t===bt.a.UPGRADE){var e=Object(C.j)(this.allProducts).grade;return this._gradeOfCard===e?void(this.productChangeType=bt.a.UNCHANGED):void(this.productChangeType=bt.a.UPGRADE)}if(t===bt.a.DOWNGRADE){if(!this.scheduledProductGrade)return void(this.productChangeType=bt.a.UNCHANGED);t=Object(C.d)(this.scheduledProductGrade,this._gradeOfCard)}this.productChangeType=t}},{key:"onClick",value:function(){this.productChangeService.scheduleProductChange(this._gradeOfCard)}},{key:"gradeOfCard",set:function(t){this._gradeOfCard=parseInt(t,10)}}]),t}()).\u0275fac=function(t){return new(t||ne)(z.Ob(rt.a))},ne.\u0275cmp=z.Ib({type:ne,selectors:[["app-product-change"]],inputs:{currentProductGrade:"currentProductGrade",scheduledProductGrade:"scheduledProductGrade",allProducts:"allProducts",gradeOfCard:"gradeOfCard"},features:[z.zb],decls:5,vars:1,consts:[["class","row justify-content-center mb-2",4,"ngIf"],["donwgrade",""],["upgrade",""],[1,"row","justify-content-center","mb-2"],[1,"col-auto"],["color","primary","mat-flat-button","",3,"click"],[4,"ngIf","ngIfThen"]],template:function(t,e){1&t&&(z.Nc(0,Jt,5,4,"div",0),z.Nc(1,te,2,3,"ng-template",null,1,z.Oc),z.Nc(3,ee,2,3,"ng-template",null,2,z.Oc)),2&t&&z.rc("ngIf",e.productChangeType!==e.SubscriptionChangeDirection.UNCHANGED)},directives:[o.p,st.b],pipes:[q.d],styles:["",".cf-suggested-text[_ngcontent-%COMP%]{color:#ff5c20;font-family:Montserrat,sans-serif;font-size:16px;font-weight:700;line-height:24px;text-align:center}.cf-change-confirmation[_ngcontent-%COMP%]{min-height:100px;border-radius:16px;border:1px solid #000}.cf-cards-container[_ngcontent-%COMP%]{position:relative;width:100%;top:5vh;display:flex;align-items:center;flex-direction:column}.coming-soon[_ngcontent-%COMP%]{size:13px;color:#927f7a}.asterisk[_ngcontent-%COMP%]{display:inline;size:13px}.products-wrapper[_ngcontent-%COMP%]{height:90vh}@media (min-width:1600px){.container[_ngcontent-%COMP%]{max-width:1400px}}@media (min-height:600px) and (max-height:1190px) and (min-width:1201px){.trust-badge-wrapper[_ngcontent-%COMP%]{height:340px}.products-wrapper[_ngcontent-%COMP%]{height:calc(100vh + 50px)}}.toggle-container[_ngcontent-%COMP%]{min-height:7vh}@media (min-height:1150px){.toggle-container[_ngcontent-%COMP%]{min-height:10vh}}"]}),ne);function ce(t,e){}function re(t,e){if(1&t&&z.Pb(0,"app-product-change",8),2&t){var n=z.kc();z.rc("gradeOfCard",n.gradeOfCard)("currentProductGrade",n.productState.currentProduct.grade)("scheduledProductGrade",null==n.productState.nextProduct?null:n.productState.nextProduct.grade)("allProducts",n.productState.allProducts)}}function ae(t,e){1&t&&(z.Ub(0,"div",9),z.Ub(1,"div",10),z.Pc(2),z.lc(3,"translate"),z.Tb(),z.Tb()),2&t&&(z.Bb(2),z.Qc(z.mc(3,1,"subscription.plans.selected")))}var oe,se=[[["div",8,"corner-content"]],"*"],le=function(t){return{"cf-card":!0,suggested:t}},de=["div.corner-content","*"],pe=((oe=function(){function t(){i(this,t)}return n(t,[{key:"gradeOfCard",set:function(t){this._gradeOfCard=parseInt(t,10)},get:function(){return this._gradeOfCard}}]),t}()).\u0275fac=function(t){return new(t||oe)},oe.\u0275cmp=z.Ib({type:oe,selectors:[["app-product-card"]],inputs:{productState:"productState",gradeOfCard:"gradeOfCard"},ngContentSelectors:de,decls:11,vars:6,consts:[[1,"px-2"],[3,"ngClass"],[1,"corner-info","d-flex","flex-column","align-items-center","montserrat-text-light","justify-content-end"],[3,"ngIf","ngIfThen"],[1,"h-100","d-flex","flex-column","justify-content-end","align-items-center"],[1,"product-change"],[3,"gradeOfCard","currentProductGrade","scheduledProductGrade","allProducts",4,"ngIf"],["currentProduct",""],[3,"gradeOfCard","currentProductGrade","scheduledProductGrade","allProducts"],[1,"active-subscription"],[1,"montserrat-text-light","cf-text","cf-text-1","text-center"]],template:function(t,e){if(1&t&&(z.qc(se),z.Ub(0,"div",0),z.Ub(1,"div",1),z.Ub(2,"div",2),z.pc(3),z.Tb(),z.Nc(4,ce,0,0,"ng-template",3),z.Ub(5,"div",4),z.pc(6,1),z.Ub(7,"div",5),z.Nc(8,re,1,4,"app-product-change",6),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Nc(9,ae,4,3,"ng-template",null,7,z.Oc)),2&t){var n=z.Ac(10);z.Bb(1),z.rc("ngClass",z.wc(4,le,e.productState.currentProduct.grade===e.gradeOfCard-1)),z.Bb(3),z.rc("ngIf",e.productState.currentProduct.grade===e.gradeOfCard)("ngIfThen",n),z.Bb(4),z.rc("ngIf",e.productState)}},directives:[o.n,o.p,ie],pipes:[q.d],styles:[".cf-card[_ngcontent-%COMP%]{position:relative;background:var(--overview-background);border-radius:24px;padding:8px;height:380px;overflow:hidden}.cf-card[_ngcontent-%COMP%]   .active-subscription[_ngcontent-%COMP%]{margin:-8px;height:40px;display:flex;justify-content:center;align-items:center;border-radius:24px 24px 0 0;background:var(--active-card-background)}.cf-card.suggested[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 4px #ff5c20}.product-change[_ngcontent-%COMP%]{min-height:40px}.corner-info[_ngcontent-%COMP%]{position:absolute;top:-120px;right:-120px;width:200px;height:200px;background-color:#ff5c20;transform:rotate(45deg);color:#fff;line-height:1.2;padding-bottom:8px}"]}),oe),ue=a("vqxn");function be(t,e){if(1&t&&(z.Ub(0,"div",11),z.Pc(1),z.Tb()),2&t){var n=z.kc(2);z.Bb(1),z.Rc(" ",n.changeText.dateText,"")}}function ge(t,e){1&t&&(z.Pc(0),z.lc(1,"translate")),2&t&&z.Rc(" ",z.mc(1,1,"subscription.change.confirm")," ")}function fe(t,e){if(1&t){var n=z.Vb();z.Ub(0,"div",2),z.Ub(1,"div",3),z.Ub(2,"div",4),z.Ub(3,"div"),z.Pc(4),z.Ub(5,"span",5),z.Pc(6),z.Tb(),z.Pc(7),z.Ub(8,"span",5),z.Pc(9),z.Tb(),z.Pc(10),z.Tb(),z.Tb(),z.Ub(11,"div",4),z.Pc(12),z.Tb(),z.Nc(13,be,2,1,"div",6),z.Ub(14,"div",7),z.Ub(15,"button",8),z.gc("click",(function(){return z.Ec(n),z.kc().onConfirm()})),z.Ub(16,"div",9),z.Nc(17,ge,2,3,"ng-template",10),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Tb()}if(2&t){var i=z.kc(),c=z.Ac(2);z.Bb(4),z.Rc("",i.changeText.questionPartOne," "),z.Bb(2),z.Qc(i.productChange.from.product.name),z.Bb(1),z.Rc(" ",i.changeText.questionPartTwo," "),z.Bb(2),z.Qc(i.productChange.to.product.name),z.Bb(1),z.Rc(" ",i.changeText.questionPartThree,""),z.Bb(2),z.Rc(" ",i.changeText.costText,""),z.Bb(1),z.rc("ngIf",i.changeText.dateText),z.Bb(4),z.rc("ngIf",!i.locked)("ngIfElse",c)}}function he(t,e){1&t&&(z.Ub(0,"div"),z.Pb(1,"mat-spinner",12),z.Tb()),2&t&&(z.Bb(1),z.rc("diameter",26))}var me,ve=((me=function(){function t(e,n,c,r,a,o){i(this,t),this.dateService=e,this.translateService=n,this.productChangeService=c,this.subscriptionChangeTranslationService=r,this.trackingDispatcherService=a,this.localeId=o,this.locked=!1}return n(t,[{key:"setChangeText",value:function(){var t=this.translateService.instant("subscription.change.questionPartOne"),e=this.translateService.instant("subscription.change.questionPartTwo"),n=this.translateService.instant("subscription.change.questionPartThree"),i=this.productChange.changeDirection===bt.a.DOWNGRADE?this.productChange.subscription.renewalDate:J()().unix(),c=Object(C.s)(this.productChange.billingDetails.billing.address.country,this.productChange.to.plan,i),r=Object(C.f)(this.productChange,c),a=this.subscriptionChangeTranslationService.getCostChangeText(this.productChange,r,c),o=this.subscriptionChangeTranslationService.getDateChangeText(this.productChange);this.changeText={questionPartOne:t,questionPartTwo:e,questionPartThree:n,costText:a,dateText:o}}},{key:"onConfirm",value:function(){this.productChangeService.confirmSubscriptionChange(this.productChange)}},{key:"trackProductChange",value:function(t){var e,n,i=t.to.product,c=t.changeDirection,r=t.status===y.a.PROCESSING;r&&c===bt.a.UPGRADE?e=T.a.SUBSCRIPTION_PRODUCTS_UPGRADE_CONFIRM:r||c!==bt.a.UPGRADE?r&&c===bt.a.DOWNGRADE?e=T.a.SUBSCRIPTION_PRODUCTS_DOWNGRADE_CONFIRM:r||c!==bt.a.DOWNGRADE||(e=T.a.SUBSCRIPTION_PRODUCTS_DOWNGRADE_OPEN):e=T.a.SUBSCRIPTION_PRODUCTS_UPGRADE_OPEN,e&&(0===i.grade?n="basic":1===i.grade?n="pro":2===i.grade&&(n="premium"),n&&this.trackingDispatcherService.emitTrackingEvent(e,{type:n}))}},{key:"productChange",set:function(t){if(t&&t.changeType===O.a.PRODUCT_CHANGE){if(t.status===y.a.CONFIRMED)return this.changeText=null,void(this.locked=!1);if(t.status===y.a.PROCESSING)return this.locked=!0,void this.trackProductChange(t);this._productChange=t,this.trackProductChange(t),this.setChangeText()}},get:function(){return this._productChange}}]),t}()).\u0275fac=function(t){return new(t||me)(z.Ob(ue.a),z.Ob(q.e),z.Ob(rt.a),z.Ob(at.a),z.Ob(gt.a),z.Ob(z.u))},me.\u0275cmp=z.Ib({type:me,selectors:[["app-product-confirm"]],inputs:{productChange:"productChange"},decls:3,vars:1,consts:[["class","cf-change-confirmation p-3 cf-card",4,"ngIf"],["spinner",""],[1,"cf-change-confirmation","p-3","cf-card"],[1,"d-flex","flex-column","align-items-center"],[1,"cf-text","cf-text-2","my-2"],[1,"font-weight-bold"],["class","cf-text cf-text-2",4,"ngIf"],[1,"d-flex","justify-content-center","mt-4"],["color","primary","mat-flat-button","",3,"click"],[1,"d-flex","justify-content-center"],[3,"ngIf","ngIfElse"],[1,"cf-text","cf-text-2"],[3,"diameter"]],template:function(t,e){1&t&&(z.Nc(0,fe,18,9,"div",0),z.Nc(1,he,2,1,"ng-template",null,1,z.Oc)),2&t&&z.rc("ngIf",e.changeText)},directives:[o.p,st.b,vt.b],pipes:[q.d],styles:[".mat-spinner[_ngcontent-%COMP%]     circle{stroke:#fff}button[_ngcontent-%COMP%]{width:250px}",".cf-suggested-text[_ngcontent-%COMP%]{color:#ff5c20;font-family:Montserrat,sans-serif;font-size:16px;font-weight:700;line-height:24px;text-align:center}.cf-change-confirmation[_ngcontent-%COMP%]{min-height:100px;border-radius:16px;border:1px solid #000}.cf-cards-container[_ngcontent-%COMP%]{position:relative;width:100%;top:5vh;display:flex;align-items:center;flex-direction:column}.coming-soon[_ngcontent-%COMP%]{size:13px;color:#927f7a}.asterisk[_ngcontent-%COMP%]{display:inline;size:13px}.products-wrapper[_ngcontent-%COMP%]{height:90vh}@media (min-width:1600px){.container[_ngcontent-%COMP%]{max-width:1400px}}@media (min-height:600px) and (max-height:1190px) and (min-width:1201px){.trust-badge-wrapper[_ngcontent-%COMP%]{height:340px}.products-wrapper[_ngcontent-%COMP%]{height:calc(100vh + 50px)}}.toggle-container[_ngcontent-%COMP%]{min-height:7vh}@media (min-height:1150px){.toggle-container[_ngcontent-%COMP%]{min-height:10vh}}",".footerfix[_ngcontent-%COMP%]{padding:0 0 6em;overflow:auto}.settings-other[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{height:24px;width:24px}.delete[_ngcontent-%COMP%]{background:#d12c3f}h2[_ngcontent-%COMP%]{font-size:24px;font-family:Archive,sans-serif}.theme-item[_ngcontent-%COMP%]{font-size:.9em;padding:4px 28px}footer[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;left:0;padding:1rem}.cf-text[_ngcontent-%COMP%]{opacity:.6;color:var(--overview-font);font-family:Montserrat,sans-serif;font-weight:500;font-size:24px;line-height:32px}.cf-text-upcoming[_ngcontent-%COMP%]{opacity:.4}.cf-text-1[_ngcontent-%COMP%]{font-size:16px;line-height:24px}.cf-text-2[_ngcontent-%COMP%]{font-size:12px;line-height:20px}.cf-text-italic[_ngcontent-%COMP%]{font-size:16px;font-style:italic;font-weight:500;line-height:24px}.cf-h1[_ngcontent-%COMP%]{color:var(--overview-font);font-family:Montserrat,sans-serif;font-size:24px;font-weight:700;line-height:32px}.cf-h2[_ngcontent-%COMP%]{color:var(--overview-font)}.cf-button[_ngcontent-%COMP%], .cf-h2[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:16px;font-weight:700;line-height:24px}.cf-button[_ngcontent-%COMP%]{color:#ff5c20;padding:6px 12px}button[mat-flat-button][_ngcontent-%COMP%]{padding:12px 24px;border-radius:24px;font-family:Montserrat,sans-serif;font-size:16px;font-weight:700;line-height:24px}.cf-form-field[_ngcontent-%COMP%]{padding:0 32px;border-radius:16px;background-color:var(--overview-line-background)}.cf-form-field.sm-pad[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px}.cf-form-field.lg-pad[_ngcontent-%COMP%]{padding-top:16px;padding-bottom:16px}.cf-icon-placeholder[_ngcontent-%COMP%]{width:24px}mat-progress-bar[_ngcontent-%COMP%]{margin-top:16px}.mat-spinner[_ngcontent-%COMP%]     circle{stroke:#fff}.spinner-container[_ngcontent-%COMP%]{padding:7px 35px}"]}),me);function Pe(t,e){if(1&t){var n=z.Vb();z.Ub(0,"div",13),z.Ub(1,"div",14),z.Ub(2,"app-toggle",15),z.gc("selected",(function(t){return z.Ec(n),z.kc().itemSelected(t)})),z.Tb(),z.Tb(),z.Tb()}if(2&t){var i=z.kc();z.Bb(2),z.rc("items",i.items)("selectedToggleIndex",i.selectedToggleIndex)}}function xe(t,e){if(1&t&&(z.Ub(0,"div",44),z.Pc(1),z.lc(2,"translate"),z.Tb()),2&t){var n=e.$implicit;z.Bb(1),z.Qc(z.mc(2,1,"subscription.plans.basic.features."+n))}}function Oe(t,e){1&t&&(z.Ub(0,"div",30),z.Pc(1),z.lc(2,"translate"),z.Tb()),2&t&&(z.Bb(1),z.Qc(z.mc(2,1,"subscription.plans.discount")))}var ye=function(t,e){return{"cf-text-1":t,"cf-text-italic mt-2":e}};function Ce(t,e){if(1&t&&(z.Ub(0,"div",45),z.Pc(1),z.lc(2,"translate"),z.Tb()),2&t){var n=e.$implicit,i=e.last;z.rc("ngClass",z.xc(4,ye,!i,i)),z.Bb(1),z.Rc(" ",z.mc(2,2,"subscription.plans.pro.features."+n)," ")}}function Te(t,e){1&t&&(z.Ub(0,"div",30),z.Pc(1),z.lc(2,"translate"),z.Tb()),2&t&&(z.Bb(1),z.Qc(z.mc(2,1,"subscription.plans.discount")))}function Ue(t,e){if(1&t&&(z.Ub(0,"div",44),z.Pc(1),z.lc(2,"translate"),z.Tb()),2&t){var n=e.$implicit;z.Bb(1),z.Rc(" ",z.mc(2,1,"subscription.plans.premium.features."+n)," ")}}function _e(t,e){if(1&t&&(z.Ub(0,"div",46),z.Pc(1),z.lc(2,"translate"),z.Ub(3,"div",47),z.Pc(4," *"),z.Tb(),z.Tb()),2&t){var n=e.$implicit;z.Bb(1),z.Rc(" ",z.mc(2,1,"subscription.plans.premium.upcomingFeatures."+n)," ")}}var Ie=function(){return[0,1,2]},Me=function(t){return{cost:t}},we=function(){return[0,1,2,3]},ke=function(){return[]};function Se(t,e){if(1&t&&(z.Ub(0,"div",16),z.Ub(1,"div",17),z.Ub(2,"div",18),z.Ub(3,"div",19),z.Ub(4,"app-product-card",20),z.Ub(5,"div",21),z.Pc(6,"5 GB"),z.Tb(),z.Ub(7,"div",22),z.Pc(8),z.lc(9,"translate"),z.Tb(),z.Ub(10,"div",23),z.Ub(11,"div",24),z.Pc(12),z.lc(13,"translate"),z.Tb(),z.Tb(),z.Ub(14,"div",18),z.Ub(15,"div",25),z.Pc(16),z.lc(17,"translate"),z.Tb(),z.Tb(),z.Ub(18,"div",26),z.Nc(19,xe,3,3,"div",27),z.Tb(),z.Tb(),z.Tb(),z.Ub(20,"div",19),z.Ub(21,"app-product-card",28),z.Ub(22,"div",21),z.Pc(23,"10 GB"),z.Tb(),z.Ub(24,"div",22),z.Pc(25),z.lc(26,"translate"),z.Tb(),z.Ub(27,"div",23),z.Ub(28,"div",24),z.Pc(29),z.lc(30,"translate"),z.Tb(),z.Tb(),z.Ub(31,"div",18),z.Ub(32,"div",25),z.Pc(33),z.lc(34,"translate"),z.Tb(),z.Tb(),z.Ub(35,"div",29),z.Ub(36,"div",30),z.Pc(37),z.lc(38,"translate"),z.Tb(),z.Nc(39,Oe,3,3,"div",31),z.Tb(),z.Ub(40,"div",29),z.Nc(41,Ce,3,7,"div",32),z.Tb(),z.Tb(),z.Tb(),z.Ub(42,"div",19),z.Ub(43,"app-product-card",33),z.Ub(44,"div",21),z.Pc(45,"25 GB"),z.Tb(),z.Ub(46,"div",22),z.Pc(47),z.lc(48,"translate"),z.Tb(),z.Ub(49,"div",34),z.Ub(50,"div",35),z.Pc(51),z.lc(52,"translate"),z.Tb(),z.Tb(),z.Ub(53,"div",36),z.Ub(54,"div",24),z.Pc(55),z.lc(56,"translate"),z.Tb(),z.Tb(),z.Ub(57,"div",18),z.Ub(58,"div",25),z.Pc(59),z.lc(60,"translate"),z.Tb(),z.Tb(),z.Ub(61,"div",29),z.Ub(62,"div",30),z.Pc(63),z.lc(64,"translate"),z.Tb(),z.Nc(65,Te,3,3,"div",31),z.Tb(),z.Pb(66,"div",18),z.Ub(67,"div",29),z.Nc(68,Ue,3,3,"div",27),z.Nc(69,_e,5,3,"div",37),z.Ub(70,"div",38),z.Pc(71),z.lc(72,"translate"),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Ub(73,"div",7),z.Ub(74,"div",39),z.Ub(75,"div",40),z.Pc(76),z.lc(77,"translate"),z.Tb(),z.Tb(),z.Tb(),z.Ub(78,"div",41),z.Ub(79,"div",42),z.Pb(80,"app-product-confirm",43),z.lc(81,"async"),z.Tb(),z.Tb(),z.Tb(),z.Tb()),2&t){var n=e.ngIf,i=z.kc();z.Bb(4),z.rc("productState",n),z.Bb(4),z.Qc(z.mc(9,24,"subscription.storage.perCompany")),z.Bb(4),z.Qc(z.mc(13,26,"subscription.plans.basic.title")),z.Bb(4),z.Qc(z.mc(17,28,"subscription.plans.basic.costs")),z.Bb(3),z.rc("ngForOf",z.vc(56,Ie)),z.Bb(2),z.rc("productState",n),z.Bb(4),z.Qc(z.mc(26,30,"subscription.storage.perUser")),z.Bb(4),z.Qc(z.mc(30,32,"subscription.plans.pro.title")),z.Bb(4),z.Qc(z.nc(34,34,"subscription.plans.costs",z.wc(57,Me,i.getCostOfPlan(n.allProducts,1,i.selectedToggle.planPaymentInterval)))),z.Bb(4),z.Qc(z.mc(38,37,"subscription.plans.perUserMonthly")),z.Bb(2),z.rc("ngIf",i.selectedToggle.planPaymentInterval===i.PlanPaymentInterval.MONTHLY),z.Bb(2),z.rc("ngForOf",z.vc(59,we)),z.Bb(2),z.rc("productState",n),z.Bb(4),z.Qc(z.mc(48,39,"subscription.storage.perUser")),z.Bb(4),z.Qc(z.mc(52,41,"subscription.plans.premium.note")),z.Bb(4),z.Qc(z.mc(56,43,"subscription.plans.premium.title")),z.Bb(4),z.Qc(z.nc(60,45,"subscription.plans.costs",z.wc(60,Me,i.getCostOfPlan(n.allProducts,2,i.selectedToggle.planPaymentInterval)))),z.Bb(4),z.Qc(z.mc(64,48,"subscription.plans.perUserMonthly")),z.Bb(2),z.rc("ngIf",i.selectedToggle.planPaymentInterval===i.PlanPaymentInterval.MONTHLY),z.Bb(3),z.rc("ngForOf",z.vc(62,ke)),z.Bb(1),z.rc("ngForOf",z.vc(63,Ie)),z.Bb(2),z.Rc(" ",z.mc(72,50,"subscription.plans.premium.includingProFeatures")," "),z.Bb(5),z.Qc(z.mc(77,52,"subscription.plans.premium.comingSoon")),z.Bb(4),z.rc("productChange",z.mc(81,54,i.productChange$))}}var Be,Ne,je,Re,De=[{path:"",component:$t,pathMatch:"full",data:{authGuardPipe:Qt.b}},{path:"products",component:(Be=function(){function e(t,n,c,r,a,o,s,l,b,g,f,h,m){i(this,e),this.authService=t,this.companyService=n,this.profileService=c,this.productService=r,this.subscriptionService=a,this.subscriptionWizardDialog=o,this.productChangeService=s,this.trackingDispatchService=l,this.router=b,this.decimalPipe=g,this.hotjarTrackingService=f,this.activeRoute=h,this.store=m,this.items=[{translateKey:"subscription.billingPeriod.yearly.title",note:"subscription.billingPeriod.yearly.note",planPaymentInterval:d.PlanPaymentInterval.YEARLY},{translateKey:"subscription.billingPeriod.monthly.title",planPaymentInterval:d.PlanPaymentInterval.MONTHLY}],this.PlanPaymentInterval=d.PlanPaymentInterval,this.destroy$=new u.a,this.subscription$=new p.a(null),this.products$=this.store.select(E),this.itemSelected(0,!1),this.initSubscriptionOfCompany(),this.initProductState(),this.initCompany(),this.initProductChanges(),this.initConfirmationWatch(),this.initWizard(),this.initToggleWatch(),this.initDirectlyRoutedProduct()}return n(e,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"itemSelected",value:function(t,e){this.selectedToggle=this.items[t],this.productChangeService.updatePaymentInterval(this.selectedToggle.planPaymentInterval),e&&this.trackingDispatchService.emitTrackingEvent(T.a.SUBSCRIPTION_PRODUCTS_INTERVAL_TOGGLE,{type:this.selectedToggle.planPaymentInterval})}},{key:"initCompany",value:function(){var t=this;this.company$=this.authService.$authState.pipe(Object(f.a)((function(e){return t.profileService.getProfile(e.uid)})),Object(f.a)((function(e){return t.companyService.getCompany(e.company)})),Object(h.a)())}},{key:"initProductState",value:function(){this.productState$=Object(b.b)([this.subscription$,this.products$]).pipe(Object(P.a)((function(e){var n=t(e,2),i=n[0],c=n[1];if(!i){var r=Object(C.j)(c);return{currentProduct:r,nextProduct:r,allProducts:c}}return{currentProduct:Object(C.q)(c,i),nextProduct:Object(C.r)(c,i),allProducts:c}})))}},{key:"initProductChanges",value:function(){this.productChange$=this.productChangeService.getProductChanges().pipe(Object(g.a)((function(t){return t.changeType===O.a.NEW_SUBSCRIPTION||t.changeType===O.a.PRODUCT_CHANGE})),Object(P.a)((function(t){return t})))}},{key:"initSubscriptionOfCompany",value:function(){var e=this,n=this.subscriptionService.getCompanySubscriptions().pipe();Object(b.b)([this.products$,n]).pipe(Object(P.a)((function(e){var n=t(e,2),i=n[0];return n[1].find((function(t){return Object(C.q)(i,t).type===d.ProductType.SUBSCRIPTION}))})),Object(m.a)(this.destroy$)).subscribe((function(t){e.subscription$.next(t)}))}},{key:"initToggleWatch",value:function(){var e=this;Object(b.b)([this.subscription$,this.products$]).pipe(Object(P.a)((function(n){var i=t(n,2),c=i[0],r=i[1];if(c){var a=Object(C.h)(r,c);e.selectedToggle=e.items.find((function(t){return t.planPaymentInterval===a.paymentInterval}))}})),Object(m.a)(this.destroy$)).subscribe()}},{key:"openSubscriptionWizard",value:function(t){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.products$.pipe(Object(Ft.a)(1)).toPromise();case 2:e.t0=e.sent,e.t1=t,(n={products:e.t0,productChange:e.t1})&&(this.wizardDialogRef=this.subscriptionWizardDialog.open(Vt.a,{data:n,disableClose:!0,panelClass:"no-padding-dialog"}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"initConfirmationWatch",value:function(){var t=this;this.productChange$.pipe(Object(g.a)((function(t){return t.changeType===O.a.PRODUCT_CHANGE||t.changeType===O.a.NEW_SUBSCRIPTION})),Object(g.a)((function(t){return t.status===y.a.CONFIRMED})),Object(m.a)(this.destroy$)).subscribe((function(){t.wizardDialogRef&&t.wizardDialogRef.close(),t.router.navigate(["settings/subscription"])}))}},{key:"initWizard",value:function(){var t=this;this.productChange$.pipe(Object(g.a)((function(t){return t.changeType===O.a.NEW_SUBSCRIPTION&&t.status===y.a.OPEN})),Object(m.a)(this.destroy$)).subscribe((function(e){t.trackWizardOpen(e),t.openSubscriptionWizard(e)}))}},{key:"getCostOfPlan",value:function(t,e,n){var i=Object(C.n)(t,e),c=Object(C.m)(i,n);return this.decimalPipe.transform(c.costPerUser[Wt.a]/(n===d.PlanPaymentInterval.MONTHLY?1:12),"1.2-2")}},{key:"trackWizardOpen",value:function(t){1===t.to.product.grade?this.trackingDispatchService.emitTrackingEvent(T.a.SUBSCRIPTION_PRODUCTS_WIZARD_OPEN,{type:"pro"}):2===t.to.product.grade&&this.trackingDispatchService.emitTrackingEvent(T.a.SUBSCRIPTION_PRODUCTS_WIZARD_OPEN,{type:"premium"})}},{key:"initDirectlyRoutedProduct",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i,c,r,a,o,s,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.activeRoute.snapshot.queryParams.product,(i=this.activeRoute.snapshot.queryParams.term)||n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Object(b.b)([this.subscriptionService.getCurrentSubscription(),this.store.select(R),this.store.select(U.p).pipe(Object(P.a)((function(t){return!(!t||!t.trialSubscription)})))]).pipe(Object(Ft.a)(1)).toPromise();case 5:if(c=e.sent,r=t(c,3),a=r[0],o=r[1],s=r[2],a&&!s){e.next=18;break}if(i&&(this.selectedToggle=this.items.find((function(t){return t.planPaymentInterval===i.toUpperCase()}))||this.items[0],this.productChangeService.updatePaymentInterval(this.selectedToggle.planPaymentInterval)),!n){e.next=16;break}if(l=n.toLowerCase(),d=o.find((function(t){return t.shortName.toLowerCase()===l}))){e.next=15;break}return e.abrupt("return");case 15:this.productChangeService.scheduleProductChange(d.grade);case 16:e.next=19;break;case 18:this.router.navigate(["settings/subscription"]);case 19:case"end":return e.stop()}}),e,this)})))}},{key:"selectedToggleIndex",get:function(){var t=this;return this.selectedToggle?this.items.findIndex((function(e){return e.planPaymentInterval===t.selectedToggle.planPaymentInterval})):0}}]),e}(),Be.\u0275fac=function(t){return new(t||Be)(z.Ob(nt.a),z.Ob(et.a),z.Ob(it.a),z.Ob(ct.a),z.Ob(tt.b),z.Ob(A.b),z.Ob(rt.a),z.Ob(gt.a),z.Ob(s.g),z.Ob(o.f),z.Ob(ot.a),z.Ob(s.a),z.Ob(_.h))},Be.\u0275cmp=z.Ib({type:Be,selectors:[["app-products"]],features:[z.Ab([o.f])],decls:19,vars:7,consts:[[1,"d-flex","flex-column","justify-content-between","products-wrapper"],[1,"toggle-container"],["class","row justify-content-center py-4",4,"ngIf"],["class","cf-cards-container",4,"ngIf"],[1,"trust-badge-wrapper"],[1,"d-flex","align-items-end","justify-content-center","h-100"],[1,"container","mb-3"],[1,"row"],[1,"col-xl-3","col-5"],["name","refund",3,"iconHeight"],["name","award"],["name","support"],["name","madeInGermany"],[1,"row","justify-content-center","py-4"],[1,"col-auto"],[3,"items","selectedToggleIndex","selected"],[1,"cf-cards-container"],[1,"container"],[1,"row","justify-content-center"],[1,"col-4"],["gradeOfCard","0",3,"productState"],[1,"corner-content","font-weight-bold"],[1,"corner-content"],[1,"row","justify-content-center","mt-5"],[1,"col-auto","cf-h1"],[1,"col-auto","cf-text"],[1,"row","justify-content-center","my-5"],["class","col-12 text-center cf-text cf-text-1",4,"ngFor","ngForOf"],["gradeOfCard","1",3,"productState"],[1,"row","justify-content-center","my-2"],[1,"col-12","text-center","cf-text","cf-text-2"],["class","col-12 text-center cf-text cf-text-2",4,"ngIf"],["class","col-12 text-center cf-text",3,"ngClass",4,"ngFor","ngForOf"],["gradeOfCard","2",3,"productState"],[1,"row","justify-content-center","mt-3"],[1,"col-auto","cf-suggested-text"],[1,"row","justify-content-center","mt-2"],["class","col-12 text-center cf-text cf-text-1 cf-text-upcoming",4,"ngFor","ngForOf"],[1,"col-12","text-center","cf-text","cf-text-italic","mt-2"],[1,"col"],[1,"text-right","mt-2","montserrat-text-light","mr-3","coming-soon"],[1,"row","justify-content-center","pt-4"],[1,"col-7"],[3,"productChange"],[1,"col-12","text-center","cf-text","cf-text-1"],[1,"col-12","text-center","cf-text",3,"ngClass"],[1,"col-12","text-center","cf-text","cf-text-1","cf-text-upcoming"],[1,"asterisk"]],template:function(t,e){1&t&&(z.Ub(0,"div",0),z.Ub(1,"div"),z.Ub(2,"div",1),z.Nc(3,Pe,3,2,"div",2),z.lc(4,"async"),z.Tb(),z.Nc(5,Se,82,64,"div",3),z.lc(6,"async"),z.Tb(),z.Ub(7,"div",4),z.Ub(8,"div",5),z.Ub(9,"div",6),z.Ub(10,"div",7),z.Ub(11,"div",8),z.Pb(12,"app-trust-badge",9),z.Tb(),z.Ub(13,"div",8),z.Pb(14,"app-trust-badge",10),z.Tb(),z.Ub(15,"div",8),z.Pb(16,"app-trust-badge",11),z.Tb(),z.Ub(17,"div",8),z.Pb(18,"app-trust-badge",12),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Tb(),z.Tb()),2&t&&(z.Bb(3),z.rc("ngIf",!z.mc(4,3,e.subscription$)),z.Bb(2),z.rc("ngIf",z.mc(6,5,e.productState$)),z.Bb(7),z.rc("iconHeight",124))},directives:[o.p,qt.a,Zt,pe,o.o,ve,o.n],pipes:[o.b,q.d],styles:[".cf-suggested-text[_ngcontent-%COMP%]{color:#ff5c20;font-family:Montserrat,sans-serif;font-size:16px;font-weight:700;line-height:24px;text-align:center}.cf-change-confirmation[_ngcontent-%COMP%]{min-height:100px;border-radius:16px;border:1px solid #000}.cf-cards-container[_ngcontent-%COMP%]{position:relative;width:100%;top:5vh;display:flex;align-items:center;flex-direction:column}.coming-soon[_ngcontent-%COMP%]{size:13px;color:#927f7a}.asterisk[_ngcontent-%COMP%]{display:inline;size:13px}.products-wrapper[_ngcontent-%COMP%]{height:90vh}@media (min-width:1600px){.container[_ngcontent-%COMP%]{max-width:1400px}}@media (min-height:600px) and (max-height:1190px) and (min-width:1201px){.trust-badge-wrapper[_ngcontent-%COMP%]{height:340px}.products-wrapper[_ngcontent-%COMP%]{height:calc(100vh + 50px)}}.toggle-container[_ngcontent-%COMP%]{min-height:7vh}@media (min-height:1150px){.toggle-container[_ngcontent-%COMP%]{min-height:10vh}}",".footerfix[_ngcontent-%COMP%]{padding:0 0 6em;overflow:auto}.settings-other[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{height:24px;width:24px}.delete[_ngcontent-%COMP%]{background:#d12c3f}h2[_ngcontent-%COMP%]{font-size:24px;font-family:Archive,sans-serif}.theme-item[_ngcontent-%COMP%]{font-size:.9em;padding:4px 28px}footer[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;left:0;padding:1rem}.cf-text[_ngcontent-%COMP%]{opacity:.6;color:var(--overview-font);font-family:Montserrat,sans-serif;font-weight:500;font-size:24px;line-height:32px}.cf-text-upcoming[_ngcontent-%COMP%]{opacity:.4}.cf-text-1[_ngcontent-%COMP%]{font-size:16px;line-height:24px}.cf-text-2[_ngcontent-%COMP%]{font-size:12px;line-height:20px}.cf-text-italic[_ngcontent-%COMP%]{font-size:16px;font-style:italic;font-weight:500;line-height:24px}.cf-h1[_ngcontent-%COMP%]{color:var(--overview-font);font-family:Montserrat,sans-serif;font-size:24px;font-weight:700;line-height:32px}.cf-h2[_ngcontent-%COMP%]{color:var(--overview-font)}.cf-button[_ngcontent-%COMP%], .cf-h2[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:16px;font-weight:700;line-height:24px}.cf-button[_ngcontent-%COMP%]{color:#ff5c20;padding:6px 12px}button[mat-flat-button][_ngcontent-%COMP%]{padding:12px 24px;border-radius:24px;font-family:Montserrat,sans-serif;font-size:16px;font-weight:700;line-height:24px}.cf-form-field[_ngcontent-%COMP%]{padding:0 32px;border-radius:16px;background-color:var(--overview-line-background)}.cf-form-field.sm-pad[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px}.cf-form-field.lg-pad[_ngcontent-%COMP%]{padding-top:16px;padding-bottom:16px}.cf-icon-placeholder[_ngcontent-%COMP%]{width:24px}mat-progress-bar[_ngcontent-%COMP%]{margin-top:16px}.mat-spinner[_ngcontent-%COMP%]     circle{stroke:#fff}.spinner-container[_ngcontent-%COMP%]{padding:7px 35px}"]}),Be),pathMatch:"full",data:{authGuardPipe:Qt.b}}],Ee=((Ne=function t(){i(this,t)}).\u0275mod=z.Mb({type:Ne}),Ne.\u0275inj=z.Lb({factory:function(t){return new(t||Ne)},imports:[[s.l.forChild(De)],s.l]}),Ne),ze=a("PCNd"),Ae=a("9jGm"),Ge=((Re=function(){function t(e,n){var c=this;i(this,t),this.actions$=e,this.productService=n,this.loadProducts$=this.actions$.pipe(Object(Ae.d)(I),Object(v.a)((function(){return c.productService.getAvailableProducts()})),Object(P.a)((function(t){return M({products:t})})))}return n(t,[{key:"ngrxOnInitEffects",value:function(){return I()}}]),t}()).\u0275fac=function(t){return new(t||Re)(z.cc(Ae.a),z.cc(ct.a))},Re.\u0275prov=z.Kb({token:Re,factory:Re.\u0275fac}),Object(l.b)([Object(Ae.b)(),Object(l.c)("design:type",Object)],Re.prototype,"loadProducts$",void 0),Re),$e=((je=function t(){i(this,t)}).\u0275mod=z.Mb({type:je}),je.\u0275inj=z.Lb({factory:function(t){return new(t||je)},providers:[ot.a],imports:[[o.c,ze.a,Ee,_.j.forFeature("products",k),Ae.c.forFeature([Ge]),W],Ee]}),je)}}])}();