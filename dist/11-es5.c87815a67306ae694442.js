!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{MVAs:function(t,i,r){"use strict";r.r(i),r.d(i,"PublicFoldersModule",(function(){return he}));var o,c,l=r("ofXK"),a=r("mrSG"),s=r("9rtP"),u=r("kj7T"),f=r("txUS"),d=r("1G5W"),b=r("XNiG"),p=r("wd/R"),h=r.n(p),m=r("fXoL"),g=r("tyNb"),v=r("AytR"),x=r("tk/3"),y=((o=function(){function t(n){e(this,t),this.http=n}return n(t,[{key:"getFolderInformation",value:function(e,t){return this.http.get(v.a.baseUrl+"publicFolders/".concat(e,"/project"),{params:{token:t}}).toPromise()}},{key:"getFolderStructure",value:function(e,t){return this.http.get(v.a.baseUrl+"publicFolders/"+e,{params:{token:t}}).toPromise()}},{key:"uploadPublicFile",value:function(e,t,n){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r={bucketFileName:t,fileName:e.name,fileType:e.type,folderId:e.folderId,token:n},i.next=3,this.http.post(v.a.baseUrl+"publicFolders/"+e.folderId,r).toPromise();case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}}),i,this)})))}},{key:"deleteFile",value:function(e,t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.http.delete(v.a.baseUrl+"publicFolders/"+e.id,{params:{token:t}}).toPromise().then());case 1:case"end":return n.stop()}}),n,this)})))}}]),t}()).\u0275fac=function(e){return new(e||o)(m.cc(x.c))},o.\u0275prov=m.Kb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),w=r("J6jy"),F=r("LcAk"),T=r("Xlwt"),P=r("TY1r"),k=r("G/Ji"),O=r("xxuN"),U=r("/4oc"),I=r("sYmb"),M=((c=function t(){e(this,t)}).\u0275fac=function(e){return new(e||c)},c.\u0275cmp=m.Ib({type:c,selectors:[["app-public-folders-footer"]],decls:25,vars:18,consts:[[1,"footer"],[1,"container"],[1,"mt-4","d-flex","justify-content-between","align-items-center","montserrat-text-light","flex-wrap"],[1,"d-flex","align-items-center","footer-item"],["href","https://www.craftnote.de/ueber","target","_blank"],["href","https://www.craftnote.de/datenschutz","target","_blank"],["href","https://www.craftnote.de/impressum","target","_blank"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(m.Ub(0,"div",0),m.Ub(1,"div",1),m.Ub(2,"div",1),m.Ub(3,"div",2),m.Ub(4,"div",3),m.Ub(5,"a",4),m.Pc(6),m.lc(7,"translate"),m.Tb(),m.Tb(),m.Ub(8,"div",3),m.Ub(9,"a",5),m.Pc(10),m.lc(11,"translate"),m.Tb(),m.Tb(),m.Ub(12,"div",3),m.Ub(13,"a",6),m.Pc(14),m.lc(15,"translate"),m.Tb(),m.Tb(),m.Ub(16,"div",3),m.Ub(17,"a",7),m.lc(18,"translate"),m.Pc(19),m.lc(20,"translate"),m.Tb(),m.Tb(),m.Ub(21,"div",3),m.Ub(22,"a"),m.Pc(23),m.lc(24,"translate"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Bb(6),m.Rc(" ",m.mc(7,6,"publicFolders.footer.aboutCraftnote"),""),m.Bb(4),m.Qc(m.mc(11,8,"publicFolders.footer.privacy")),m.Bb(4),m.Qc(m.mc(15,10,"publicFolders.footer.impressum")),m.Bb(3),m.rc("href","mailto:"+m.mc(18,12,"publicFolders.footer.mail"),m.Gc),m.Bb(2),m.Rc("",m.mc(20,14,"publicFolders.footer.mail")," "),m.Bb(4),m.Rc("",m.mc(24,16,"publicFolders.footer.phone")," "))},pipes:[I.d],styles:[".footer[_ngcontent-%COMP%]{background-color:#e9e9e9;font-size:14px;margin-left:-15px;width:calc(100% + 30px)}.footer[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]{height:47px}.footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#212121}@media screen and (max-width:800px){.footer[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]{width:50%}}"]}),c),C=r("3uU/"),_=r("RpJq"),B=r("1OTw"),E=r("V+ph");function R(e,t){1&e&&m.Pb(0,"img",3)}function j(e,t){if(1&e&&(m.jc(),m.Ub(0,"svg",4),m.Ub(1,"g",5),m.Pb(2,"path",6),m.Pb(3,"path",7),m.Ub(4,"text",8),m.Ub(5,"tspan",9),m.Pc(6),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e){var n=m.kc();m.Bb(6),m.Qc(n.iconText)}}function L(e,t){if(1&e&&m.Pb(0,"img",10),2&e){var n=m.kc();m.rc("src",n.file.thumbUrl,m.Gc)}}var N,S=((N=function(){function t(n,i){e(this,t),this.baseFileService=n,this.decimalPipe=i,this.FileType=f.FileType}return n(t,[{key:"iconText",get:function(){return void 0!==this.file.uploadPercentage&&100!==this.file.uploadPercentage?this.decimalPipe.transform(this.file.uploadPercentage,"2.0-0")+"%":this.baseFileService.getFileExtOrName(this.file).toUpperCase()}}]),t}()).\u0275fac=function(e){return new(e||N)(m.Ob(w.a),m.Ob(l.f))},N.\u0275cmp=m.Ib({type:N,selectors:[["app-public-file-icon"]],inputs:{file:"file"},decls:3,vars:3,consts:[["src","./assets/images/icons/folder-icon.svg",4,"ngIf"],["height","61","viewBox","10 0 51 60","width","69",4,"ngIf"],["class","thumb",3,"src",4,"ngIf"],["src","./assets/images/icons/folder-icon.svg"],["height","61","viewBox","10 0 51 60","width","69"],["fill","none","fill-rule","evenodd"],["d","M41.383 1l18.44 18.292v38.145a2.4 2.4 0 0 1-2.4 2.4H12.399a2.4 2.4 0 0 1-2.399-2.4V3.399A2.4 2.4 0 0 1 12.4 1h28.983z","fill","#9E9E9E"],["d","M41.383 1l18.44 18.292v.555H43.373a2.4 2.4 0 0 1-2.399-2.4V1h.408z","fill","#D4D4D4"],["fill","black","font-family","Helvetica-Bold, Helvetica","font-size","12.397","font-weight","bold","transform","translate(10 1)"],["x","10.858","y","38.124"],[1,"thumb",3,"src"]],template:function(e,t){1&e&&(m.Nc(0,R,1,0,"img",0),m.Nc(1,j,7,1,"svg",1),m.Nc(2,L,1,1,"img",2)),2&e&&(m.rc("ngIf",t.file.type===t.FileType.FOLDER),m.Bb(1),m.rc("ngIf",t.file.type!==t.FileType.FOLDER&&!t.file.thumbUrl),m.Bb(1),m.rc("ngIf",t.file.type!==t.FileType.FOLDER&&t.file.thumbUrl))},directives:[l.p],styles:[".thumb[_ngcontent-%COMP%]{height:80px;width:80px}"]}),N);function A(e,t){if(1&e){var n=m.Vb();m.Ub(0,"mat-icon",8),m.gc("click",(function(){return m.Ec(n),m.kc().contextMenuOpen=!0})),m.Pc(1,"more_vert"),m.Tb(),m.Ub(2,"mat-menu",9,10),m.gc("closed",(function(){return m.Ec(n),m.kc().contextMenuOpen=!1})),m.Ub(4,"button",11),m.gc("click",(function(){m.Ec(n);var e=m.kc();return e.deleteFile.emit(e.file)})),m.Pc(5),m.lc(6,"translate"),m.Tb(),m.Ub(7,"button",11),m.gc("click",(function(){m.Ec(n);var e=m.kc();return e.downloadFile.emit(e.file)})),m.Pc(8),m.lc(9,"translate"),m.Tb(),m.Tb()}if(2&e){var i=m.Ac(3);m.rc("mat-menu-trigger-for",i),m.Bb(5),m.Qc(m.mc(6,3,"publicFolders.delete")),m.Bb(3),m.Qc(m.mc(9,5,"publicFolders.download"))}}var D,z,V=((z=function(){function t(n,i,r,o){e(this,t),this.dialog=n,this.baseFileService=i,this.datePipe=r,this.deviceTypeService=o,this.deleteFile=new m.n,this.downloadFile=new m.n,this.contextMenuOpen=!1,this._showMoreButtons=!1}return n(t,[{key:"showFile",value:function(){var e=this;if(!this.contextMenuOpen)if(this.baseFileService.isPreviewFileType(this.file)){var t=this.allFiles.filter((function(t){return t.type===e.file.type})),n=t.indexOf(this.file);this.dialog.open(_.a,{height:"100%",width:"100%",maxWidth:"100%",data:{files:t,projectId:void 0,position:n}})}else this.downloadFile.emit(this.file)}},{key:"fileIsUploading",value:function(){return void 0!==this.file.uploadPercentage}},{key:"showMoreButtons",set:function(e){this._showMoreButtons=e},get:function(){return!!this.deviceTypeService.isTouchDevice()||(this._showMoreButtons||this.contextMenuOpen)&&!this.fileIsUploading()}}]),t}()).\u0275fac=function(e){return new(e||z)(m.Ob(F.b),m.Ob(w.a),m.Ob(l.e),m.Ob(E.b))},z.\u0275cmp=m.Ib({type:z,selectors:[["app-public-file"]],inputs:{file:"file",allFiles:"allFiles"},outputs:{deleteFile:"deleteFile",downloadFile:"downloadFile"},decls:11,vars:7,consts:[[1,"d-flex","mx-lg-4","pointer",3,"click","mouseenter","mouseleave"],[1,"file-icon"],[3,"file"],[1,"text-break","mt-1"],[1,"montserrat-text"],[1,"file-date"],[1,"d-flex","align-items-start","more-button-container"],[3,"ngIf"],[3,"mat-menu-trigger-for","click"],[3,"closed"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(e,t){1&e&&(m.Ub(0,"div",0),m.gc("click",(function(){return t.showFile()}))("mouseenter",(function(){return t.showMoreButtons=!0}))("mouseleave",(function(){return t.showMoreButtons=!1})),m.Ub(1,"div",1),m.Pb(2,"app-public-file-icon",2),m.Ub(3,"div",3),m.Ub(4,"span",4),m.Pc(5),m.Tb(),m.Tb(),m.Ub(6,"div",5),m.Pc(7),m.lc(8,"date"),m.Tb(),m.Tb(),m.Ub(9,"div",6),m.Nc(10,A,10,7,"ng-template",7),m.Tb(),m.Tb()),2&e&&(m.Bb(2),m.rc("file",t.file),m.Bb(3),m.Qc(t.file.name),m.Bb(2),m.Qc(m.nc(8,4,1e3*t.file.creationTimestamp,"shortDate")),m.Bb(3),m.rc("ngIf",t.showMoreButtons))},directives:[S,l.p,P.a,B.c,B.d,B.a],pipes:[l.e,I.d],styles:[".disabled[_ngcontent-%COMP%]{opacity:1%}.show-on-hover[_ngcontent-%COMP%]:hover{display:block;background-color:#3d5798}.more-button-container[_ngcontent-%COMP%]{min-width:25px}.file-date[_ngcontent-%COMP%]{color:#9e9e9e;font-size:14px}.file-icon[_ngcontent-%COMP%]{width:120px;display:flex;flex-direction:column;align-items:center}"]}),z),Q=((D=function t(){e(this,t)}).\u0275fac=function(e){return new(e||D)},D.\u0275cmp=m.Ib({type:D,selectors:[["app-page-not-found"]],decls:12,vars:6,consts:[[1,"container","mt-5"],[1,"d-flex","flex-column","h-100"],[1,"flex-grow-1"],[1,"content"],[1,"sorry","montserrat-text-light","pt-2"],[1,"sorry-text","montserrat-text-light","pt-4"]],template:function(e,t){1&e&&(m.Ub(0,"div",0),m.Ub(1,"div",1),m.Pb(2,"div",2),m.Ub(3,"div",3),m.Ub(4,"mat-icon"),m.Pc(5,"error"),m.Tb(),m.Ub(6,"div",4),m.Pc(7),m.lc(8,"translate"),m.Tb(),m.Ub(9,"div",5),m.Pc(10),m.lc(11,"translate"),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Bb(7),m.Rc("",m.mc(8,2,"publicFolders.notFound.sorry"),"..."),m.Bb(3),m.Rc("",m.mc(11,4,"publicFolders.notFound.sorryText")," "))},directives:[P.a],pipes:[I.d],styles:[".content[_ngcontent-%COMP%]{flex-grow:5}.content[_ngcontent-%COMP%]   .sorry[_ngcontent-%COMP%]{height:80px;color:#212121;font-size:60px;letter-spacing:0;line-height:80px}.content[_ngcontent-%COMP%]   .sorry-text[_ngcontent-%COMP%]{height:19px;color:#2c211d;font-size:16px;letter-spacing:0;line-height:19px}.content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{opacity:1%;font-size:60px}"]}),D),G=r("BLDC"),H=["fileSelect"];function X(e,t){if(1&e&&m.Pb(0,"img",16),2&e){var n=m.kc(3);m.rc("src",n.projectInfo.companyLogo,m.Gc)}}function $(e,t){1&e&&m.Pb(0,"img",17)}var J=function(e,t){return{companyName:e,folderName:t}};function W(e,t){if(1&e&&(m.Ub(0,"div",19),m.Ub(1,"div",28),m.Ub(2,"div",29),m.Pb(3,"div",30),m.lc(4,"translate"),m.Tb(),m.Tb(),m.Tb()),2&e){var n=m.kc(4);m.Bb(3),m.rc("innerHTML",m.nc(4,1,"publicFolders.hint",m.xc(4,J,n.projectInfo.companyName,n.publicFolder.name)),m.Fc)}}function Y(e,t){if(1&e){var n=m.Vb();m.Ub(0,"div",35),m.Ub(1,"span",36),m.Pc(2),m.lc(3,"translate"),m.Tb(),m.Ub(4,"button",37),m.gc("click",(function(){return m.Ec(n),m.kc(5).openFileSelection()})),m.Ub(5,"mat-icon"),m.Pc(6,"add"),m.Tb(),m.Tb(),m.Ub(7,"input",38,39),m.gc("change",(function(e){return m.Ec(n),m.kc(5).uploadFiles(e.target.files)})),m.Tb(),m.Tb()}2&e&&(m.rc("@shrinkOut",void 0),m.Bb(2),m.Qc(m.mc(3,2,"publicFolders.uploadFile")))}function q(e,t){if(1&e){var n=m.Vb();m.Ub(0,"div",35),m.Ub(1,"div"),m.Ub(2,"button",40),m.gc("click",(function(){return m.Ec(n),m.kc(5).toggleAddButtonVisibility()})),m.Ub(3,"mat-icon"),m.Pc(4,"add"),m.Tb(),m.Tb(),m.Tb(),m.Tb()}if(2&e){var i=m.kc(5);m.Bb(3),m.rc("@rotate",i.addButtonsVisible?"in":"out")}}function K(e,t){if(1&e){var n=m.Vb();m.Ub(0,"div",42),m.Ub(1,"div",43),m.Ub(2,"app-public-file",44),m.gc("downloadFile",(function(e){return m.Ec(n),m.kc(6).downloadFile(e)}))("deleteFile",(function(e){return m.Ec(n),m.kc(6).deleteFile(e)})),m.Tb(),m.Tb(),m.Tb()}if(2&e){var i=t.$implicit,r=m.kc(6);m.Bb(2),m.rc("file",i)("allFiles",r.filesInCurrentLevel)}}function Z(e,t){if(1&e&&(m.Ub(0,"div",7),m.Ub(1,"div",19),m.Nc(2,K,3,2,"div",41),m.Tb(),m.Tb()),2&e){var n=m.kc(5);m.Bb(2),m.rc("ngForOf",n.filesInCurrentLevel)}}function ee(e,t){if(1&e&&(m.Ub(0,"div",31),m.Ub(1,"div",32),m.Pc(2),m.Tb(),m.Ub(3,"div",33),m.Nc(4,Y,9,4,"div",34),m.Nc(5,q,5,1,"div",34),m.Tb(),m.Tb(),m.Pb(6,"mat-divider"),m.Nc(7,Z,3,1,"ng-template",1)),2&e){var n=m.kc(4),i=m.Ac(8);m.Bb(2),m.Sc("",n.publicFolder.name," (",n.filesInCurrentLevel.length,")"),m.Bb(2),m.rc("ngIf",n.addButtonsVisible),m.Bb(1),m.rc("ngIf",!1),m.Bb(2),m.rc("ngIf",n.filesInCurrentLevel.length>0)("ngIfElse",i)}}function te(e,t){if(1&e&&(m.Ub(0,"div",18),m.Ub(1,"div",19),m.Ub(2,"div",20),m.Ub(3,"h2",21),m.Pc(4),m.lc(5,"translate"),m.Tb(),m.Tb(),m.Tb(),m.Ub(6,"div",19),m.Ub(7,"div",20),m.Ub(8,"h5",22),m.Pc(9),m.lc(10,"translate"),m.Tb(),m.Tb(),m.Tb(),m.Ub(11,"div",23),m.Ub(12,"div",24),m.Pc(13),m.lc(14,"translate"),m.Tb(),m.Ub(15,"div",25),m.Ub(16,"span"),m.Pc(17),m.Tb(),m.Tb(),m.Tb(),m.Nc(18,W,5,7,"div",26),m.Ub(19,"div",27),m.Ub(20,"div",20),m.Nc(21,ee,8,6,"ng-template",1),m.Tb(),m.Tb(),m.Tb()),2&e){var n=m.kc(3),i=m.Ac(4);m.Bb(4),m.Sc("",m.mc(5,9,"publicFolders.project"),": ",n.projectInfo.projectName,""),m.Bb(5),m.Sc("",m.mc(10,11,"publicFolders.projectId"),": ",n.projectInfo.projectId,""),m.Bb(4),m.Rc(" ",m.mc(14,13,"publicFolders.company"),": "),m.Bb(4),m.Qc(n.projectInfo.companyName),m.Bb(1),m.rc("ngIf",n.publicFolder),m.Bb(3),m.rc("ngIf",n.publicFolder)("ngIfElse",i)}}function ne(e,t){if(1&e&&(m.Ub(0,"div",7,8),m.Ub(2,"div",9),m.Ub(3,"div",10),m.Pb(4,"img",11),m.Tb(),m.Ub(5,"div",12),m.Nc(6,X,1,1,"img",13),m.Nc(7,$,1,0,"img",14),m.Tb(),m.Tb(),m.Nc(8,te,22,15,"div",15),m.Tb()),2&e){var n=m.kc(2);m.Bb(6),m.rc("ngIf",n.projectInfo.companyLogo),m.Bb(1),m.rc("ngIf",!n.projectInfo.companyLogo),m.Bb(1),m.rc("ngIf",n.projectInfo)}}function ie(e,t){if(1&e&&m.Nc(0,ne,9,3,"div",6),2&e){var n=m.kc(),i=m.Ac(6);m.rc("ngIf",n.folderExists)("ngIfElse",i)}}function re(e,t){1&e&&(m.Ub(0,"div",45),m.Pb(1,"mat-spinner",46),m.Tb())}function oe(e,t){1&e&&m.Pb(0,"app-page-not-found")}function ce(e,t){1&e&&(m.Ub(0,"div",47),m.Ub(1,"mat-icon"),m.Pc(2,"photo_library"),m.Tb(),m.Ub(3,"p"),m.Pc(4),m.lc(5,"translate"),m.Tb(),m.Tb()),2&e&&(m.Bb(4),m.Qc(m.mc(5,1,"publicFolders.noFiles")))}function le(e,t){1&e&&(m.Ub(0,"div",48),m.Pb(1,"app-pulsing-craftnote-icon"),m.Tb())}var ae,se,ue=function(e){return e.FILE_ALREADY_EXISTS="fileAlreadyExists",e.UPLOAD_ERROR="uploadError",e.DELETION_ERROR="deletionError",e}({}),fe=((ae=function(){function t(n,i,r,o,c,l,a){e(this,t),this.route=n,this.service=i,this.baseFileService=r,this.dialog=o,this.fileUploadService=c,this.alertService=l,this.translateService=a,this.addButtonsVisible=!0,this.filesInCurrentLevel=[],this.destroy$=new b.a}return n(t,[{key:"ngOnInit",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.folderId=this.route.snapshot.params.folderId,this.token=this.route.snapshot.queryParamMap.get("token"),e.next=4,this.getFolderInformation();case 4:if(e.t0=this.folderExists,!e.t0){e.next=8;break}return e.next=8,this.getFolderStructure();case 8:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"getFolderInformation",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.service.getFolderInformation(this.folderId,this.token);case 3:this.projectInfo=e.sent,this.folderExists=!0,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.folderExists=!1;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"getFolderStructure",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.getFolderStructure(this.folderId,this.token);case 2:t=e.sent,this.setFolderName(t),this.filesInCurrentLevel=t.filter((function(e){return e.folderId===n.folderId&&e.type!==f.FileType.FOLDER})),this.sortFiles();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"toggleAddButtonVisibility",value:function(){this.addButtonsVisible=!this.addButtonsVisible}},{key:"openFileSelection",value:function(){this.fileSelect.nativeElement.click()}},{key:"uploadFiles",value:function(e){var t=this;Array.from({length:e.length}).forEach((function(n,i){return t.uploadFile(e[i])}))}},{key:"uploadFile",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.fileWithNameExists(e)){t.next=2;break}return t.abrupt("return",void this.showAlert(ue.FILE_ALREADY_EXISTS));case 2:return t.next=4,this.addTemporaryLocalFile(e);case 4:return n=t.sent,i=this.fileUploadService.uploadPublicFile(e),r=i.name,(o=i.percentage$).pipe(Object(d.a)(this.destroy$)).subscribe((function(e){return n.uploadPercentage=e})),t.next=11,o.toPromise();case 11:return t.prev=11,t.next=14,this.service.uploadPublicFile(n,r,this.token);case 14:n.id=t.sent,t.next=20;break;case 17:t.prev=17,t.t0=t.catch(11),this.removeFile(n),this.showAlert(ue.UPLOAD_ERROR);case 20:return t.prev=20,n.uploadPercentage=void 0,this.fileSelect.nativeElement.value="",t.finish(20);case 23:case"end":return t.stop()}}),t,this,[[11,17,20,23]])})))}},{key:"deleteFile",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.service.deleteFile(e,this.token);case 3:this.removeFile(e),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.showAlert(ue.DELETION_ERROR);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"downloadFile",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.fileUrl);case 2:return n=t.sent,t.t0=window.URL,t.next=6,n.blob();case 6:t.t1=t.sent,i=t.t0.createObjectURL.call(t.t0,t.t1),(r=document.createElement("a")).href=i,r.download=e.name,r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r);case 10:case"end":return t.stop()}}),t)})))}},{key:"addTemporaryLocalFile",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storeFileLocally(e);case 2:return n=t.sent,i=this.baseFileService.getFileExtOrName(e),r=this.baseFileService.checkFileType(i),o={id:void 0,name:e.name,fileUrl:n,folderId:this.folderId,type:r,size:e.size,creationTimestamp:h()().unix()},t.abrupt("return",(r===f.FileType.IMAGE&&(o.thumbUrl=n),this.addFile(o),o));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"sortFiles",value:function(){this.filesInCurrentLevel.sort((function(e,t){return t.creationTimestamp-e.creationTimestamp}))}},{key:"addFile",value:function(e){this.filesInCurrentLevel.push(e),this.sortFiles()}},{key:"removeFile",value:function(e){this.filesInCurrentLevel=this.filesInCurrentLevel.filter((function(t){return t.id!==e.id})),this.sortFiles()}},{key:"fileWithNameExists",value:function(e){return this.filesInCurrentLevel.some((function(t){return t.name===e.name}))}},{key:"storeFileLocally",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new FileReader,t.abrupt("return",(n.readAsDataURL(e),new Promise((function(e){n.onload=function(){e(n.result)}}))));case 2:case"end":return t.stop()}}),t)})))}},{key:"setFolderName",value:function(e){var t=e.find((function(e){return e.type===f.FileType.FOLDER&&!e.folderId}));t&&(this.publicFolder=t)}},{key:"showAlert",value:function(e){var t=this.translateService.instant("publicFolders.errors."+e);this.alertService.showAlert(t,4e3)}}]),t}()).\u0275fac=function(e){return new(e||ae)(m.Ob(g.a),m.Ob(y),m.Ob(w.a),m.Ob(F.b),m.Ob(O.b),m.Ob(U.a),m.Ob(I.e))},ae.\u0275cmp=m.Ib({type:ae,selectors:[["app-public-folders"]],viewQuery:function(e,t){var n;1&e&&m.Uc(H,!0),2&e&&m.zc(n=m.hc())&&(t.fileSelect=n.first)},decls:11,vars:2,consts:[[1,"d-flex","h-100","flex-column","justify-content-between"],[3,"ngIf","ngIfElse"],["spinner",""],["notFound",""],["noFiles",""],["loading",""],["class","container",4,"ngIf","ngIfElse"],[1,"container"],["pageContent",""],[1,"banner-wrapper"],[1,"w-100","banner"],["src","/assets/images/banner-image-businesscard.png"],[1,"logo","d-flex","align-items-center","justify-content-center"],[3,"src",4,"ngIf"],["src","assets/images/default-company-website-logo.png",4,"ngIf"],["class","project-info",4,"ngIf"],[3,"src"],["src","assets/images/default-company-website-logo.png"],[1,"project-info"],[1,"row"],[1,"col-12"],[1,"montserrat-text"],[1,"montserrat-text-light"],[1,"row","mt-4"],[1,"col-12","col-md-2","montserrat-text","company"],[1,"col-12","col-md-10","center","company-text"],["class","row",4,"ngIf"],[1,"row","mt-5"],[1,"col-12","mt-5"],[1,"hint"],[3,"innerHTML"],[1,"d-flex","justify-content-between","mb-2"],[1,"font-weight-bold","folder-title"],[1,"d-flex","align-items-center"],["class","add-line",4,"ngIf"],[1,"add-line"],[1,"fab-text","orange-text"],["color","primary","mat-mini-fab","",3,"click"],["id","file-upload-input","type","file","hidden","","multiple","false",3,"change"],["fileSelect",""],["color","primary","mat-mini-fab","",1,"mb-1",3,"click"],["class","col-6 col-md-4 col-lg-3 col-xl-2 mt-4",4,"ngFor","ngForOf"],[1,"col-6","col-md-4","col-lg-3","col-xl-2","mt-4"],[1,"d-flex","justify-content-center","w-100"],[3,"file","allFiles","downloadFile","deleteFile"],[1,"w-100","mt-5","d-flex","justify-content-center"],["diameter","45"],[1,"w-100","mt-5","d-flex","flex-column","align-items-center","not-found"],[1,"w-100","h-100","d-flex","align-items-center","justify-content-center"]],template:function(e,t){if(1&e&&(m.Ub(0,"div",0),m.Nc(1,ie,1,2,"ng-template",1),m.Pb(2,"app-public-folders-footer"),m.Tb(),m.Nc(3,re,2,0,"ng-template",null,2,m.Oc),m.Nc(5,oe,1,0,"ng-template",null,3,m.Oc),m.Nc(7,ce,6,3,"ng-template",null,4,m.Oc),m.Nc(9,le,2,0,"ng-template",null,5,m.Oc)),2&e){var n=m.Ac(10);m.Bb(1),m.rc("ngIf",void 0!==t.folderExists)("ngIfElse",n)}},directives:[l.p,M,C.a,T.b,P.a,l.o,V,k.b,Q,G.a],pipes:[I.d],styles:["*[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif}mat-icon[_ngcontent-%COMP%]{font-family:Material Icons,sans-serif}.banner-wrapper[_ngcontent-%COMP%]{position:relative}.banner[_ngcontent-%COMP%]{background-color:#2b2b2b;height:300px;border-radius:5px;margin-top:30px;overflow-x:hidden;overflow-y:visible}.banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:100%;height:100%}.logo[_ngcontent-%COMP%]{position:absolute;top:150px;left:100px;width:200px;height:200px;box-shadow:0 5px 5px #a9a9a9;background-color:#fff}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:100%;height:100%}.container[_ngcontent-%COMP%]{height:auto!important}.project-info[_ngcontent-%COMP%]{margin-top:90px}.center[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.company[_ngcontent-%COMP%]{font-size:24px}.company-text[_ngcontent-%COMP%]{font-size:16px}.folder-title[_ngcontent-%COMP%]{margin:auto 0;font-size:24px;font-weight:700}.add-line[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.add-line[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.hint[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.15);background-color:hsla(0,0%,52.2%,.1);border-radius:8px;font-size:14px;padding:16px}.not-found[_ngcontent-%COMP%]{font-size:16px;color:#858585}.not-found[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:45px;margin-bottom:30px;margin-left:-20px}@media only screen and (max-width:767px){.logo[_ngcontent-%COMP%]{top:22px;left:22px;width:100px;height:100px}.banner[_ngcontent-%COMP%]{height:86px}}"],data:{animation:[s.a,u.a]}}),ae),de=r("PCNd"),be=r("vMH6"),pe=[{path:":folderId",component:fe}],he=((se=function t(){e(this,t)}).\u0275mod=m.Mb({type:se}),se.\u0275inj=m.Lb({factory:function(e){return new(e||se)},imports:[[g.l.forChild(pe),I.c,l.c,C.b,B.b,de.a,be.a],g.l]}),se)}}])}();