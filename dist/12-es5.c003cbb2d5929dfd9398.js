!function(){function t(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,c=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(s){c=!0,i=s}finally{try{r||null==a.return||a.return()}finally{if(c)throw i}}return n}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Ri1m:function(e,r,i){"use strict";i.r(r),i.d(r,"RestorableProjectsModule",(function(){return pt}));var o,a,s,u=i("ofXK"),l=i("sYmb"),p=i("TY1r"),f=i("1OTw"),d=i("mrSG"),b=i("9jBU"),m=i("fXoL"),h=i("l7P3"),g=i("xU6T"),j=i("0ZXI"),v=i("IzEk"),_=function(t,e){return(t.lastEditedDate||0)-(e.lastEditedDate||0)},y=i("A2Vd"),O=i("IRfi"),x=((o=function(){function t(e){n(this,t),this.store=e,this.filteredProjects=new m.n,this.currentSortFunction=_,this.searchTerm=""}return c(t,[{key:"ngOnChanges",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.emit();case 2:case"end":return t.stop()}}),t,this)})))}},{key:"setSearchTerm",value:function(t){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.searchTerm=t,e.next=3,this.emit();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"load",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.store.select(b.j,{projectIds:this.allProjects}).pipe(Object(v.a)(1)).toPromise();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"search",value:function(t){var e=this;return t.filter((function(t){return e.checkProject(t,e.searchTerm)}))}},{key:"sort",value:function(t){return t.sort(this.currentSortFunction)}},{key:"emit",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.load();case 2:e=t.sent,n=this.search(e),r=this.sort(n),this.filteredProjects.emit(r.map((function(t){return t.id})));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"checkProject",value:function(t,e){return t.name.toLowerCase().includes(e.toLowerCase())}}]),t}()).\u0275fac=function(t){return new(t||o)(m.Ob(h.h))},o.\u0275cmp=m.Ib({type:o,selectors:[["app-project-search-new"]],inputs:{allProjects:"allProjects"},outputs:{filteredProjects:"filteredProjects"},features:[m.zb],decls:7,vars:3,consts:[[1,"search-wrapper"],["matInput","",3,"placeholder","keyup"],["searchElement",""],[2,"display","none"],["matInput",""]],template:function(t,e){if(1&t){var n=m.Vb();m.Ub(0,"div",0),m.Ub(1,"input",1,2),m.gc("keyup",(function(){m.Ec(n);var t=m.Ac(2);return e.setSearchTerm(t.value)})),m.lc(3,"translate"),m.Tb(),m.Ub(4,"div",3),m.Ub(5,"mat-form-field"),m.Pb(6,"input",4),m.Tb(),m.Tb(),m.Tb()}2&t&&(m.Bb(1),m.rc("placeholder",m.mc(3,1,"widgets.search.placeholder")))},directives:[y.b,O.b],pipes:[l.d],styles:["input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:none;background-color:var(--filter-btn-background-color);color:var(--filter-font-color);padding:10px 8px;border-radius:4px;height:40px;font-size:14px}.search-wrapper[_ngcontent-%COMP%]{margin:6px 0}"]}),o),P=i("+J/9"),w=i("itXk"),C=i("lJxs"),k=i("gEt1"),T=((s=function(){function t(){n(this,t)}return c(t,[{key:"transform",value:function(t){switch(t.colorTag){case"COLOR1":return"tag-red";case"COLOR2":return"tag-orange";case"COLOR3":return"tag-yellow";case"COLOR4":return"tag-green";case"COLOR5":return"tag-purple";case"COLOR6":return"tag-blue";case"COLOR7":return"tag-teal";case"COLOR8":return"tag-pink";case"COLOR9":return"tag-dirty-green";case"COLOR10":default:return"tag-royal-blue"}}}]),t}()).\u0275fac=function(t){return new(t||s)},s.\u0275pipe=m.Nb({name:"projectIconColor",type:s,pure:!0}),s),I=((a=function(){function t(){n(this,t)}return c(t,[{key:"transform",value:function(t){var e="";return t.street&&(e+=t.street+", "),t.zipcode&&(e+=t.zipcode+" "),t.city&&(e+=" "+t.city),e}}]),t}()).\u0275fac=function(t){return new(t||a)},a.\u0275pipe=m.Nb({name:"projectAddress",type:a,pure:!0}),a);function U(t,e){1&t&&m.Qb(0)}var M=function(t){return{project:t}};function N(t,e){if(1&t&&(m.Sb(0),m.Nc(1,U,1,0,"ng-container",7),m.Rb()),2&t){var n=m.kc().ngIf;m.kc();var r=m.Ac(3);m.Bb(1),m.rc("ngTemplateOutlet",r)("ngTemplateOutletContext",m.wc(2,M,n.project))}}function R(t,e){if(1&t&&m.Qb(0,11),2&t){m.kc(2);var n=m.Ac(5);m.rc("ngTemplateOutlet",n)}}function B(t,e){1&t&&m.Qb(0)}function S(t,e){1&t&&m.Qb(0)}function z(t,e){if(1&t&&(m.Ub(0,"div",14),m.Pc(1),m.Tb()),2&t){var n=m.kc(2).ngIf;m.Bb(1),m.Qc(n.unreadCount)}}function L(t,e){if(1&t&&(m.Ub(0,"div",12),m.Nc(1,z,2,1,"div",13),m.Tb()),2&t){var n=m.kc().ngIf;m.Bb(1),m.rc("ngIf",n.unreadCount)}}function A(t,e){1&t&&(m.Ub(0,"div",15),m.Ub(1,"mat-icon",16),m.Pc(2,"more_vert"),m.Tb(),m.Tb())}function E(t,e){if(1&t&&(m.Ub(0,"div"),m.Ub(1,"div",4),m.Ub(2,"div",5),m.Nc(3,N,2,4,"ng-container",0),m.Nc(4,R,1,1,"ng-container",6),m.Tb(),m.Nc(5,B,1,0,"ng-container",7),m.Ub(6,"div",8),m.Nc(7,S,1,0,"ng-container",7),m.Tb(),m.Nc(8,L,2,1,"div",9),m.Nc(9,A,3,0,"div",10),m.Tb(),m.Tb()),2&t){var n=e.ngIf,r=m.kc(),c=m.Ac(7);m.Bb(3),m.rc("ngIf","PROJECT"===n.project.projectType),m.Bb(1),m.rc("ngIf","FOLDER"===n.project.projectType),m.Bb(1),m.rc("ngTemplateOutlet",c)("ngTemplateOutletContext",m.wc(8,M,n.project)),m.Bb(2),m.rc("ngTemplateOutlet",r.actions)("ngTemplateOutletContext",r.context),m.Bb(1),m.rc("ngIf",r.displayNotifications),m.Bb(1),m.rc("ngIf",r.hasMenu)}}function Q(t,e){if(1&t&&(m.Ub(0,"div",17),m.lc(1,"projectIconColor"),m.Pc(2),m.lc(3,"uppercase"),m.Tb()),2&t){var n=e.project;m.rc("ngClass",m.mc(1,2,n)),m.Bb(2),m.Qc(m.mc(3,4,n.name[0]))}}function $(t,e){1&t&&(m.Ub(0,"mat-icon",18),m.Pc(1,"folder"),m.Tb())}function F(t,e){if(1&t&&(m.Ub(0,"div",19),m.Ub(1,"div",20),m.Pc(2),m.Tb(),m.Ub(3,"div",21),m.Pc(4),m.Tb(),m.Ub(5,"div",22),m.Pc(6),m.lc(7,"projectAddress"),m.Tb(),m.Tb()),2&t){var n=e.project;m.Bb(2),m.Qc(n.name),m.Bb(2),m.Qc(n.orderNumber),m.Bb(2),m.Qc(m.mc(7,3,n))}}var D,V=((D=function(){function e(t,r){n(this,e),this.store=t,this.cdr=r,this.userId$=this.store.select(k.r),this.hasMenu=!1}return c(e,[{key:"getAddressText",value:function(t){var e="";return t.billingStreet&&(e+=t.billingStreet+", "),t.billingZipcode&&(e+=t.billingZipcode+" "),t.billingCity&&(e+=" "+t.billingCity),e}},{key:"ngOnChanges",value:function(){this.setState()}},{key:"ngAfterContentInit",value:function(){this.hasMenu=!!this.menu,this.cdr.detectChanges()}},{key:"setState",value:function(){var e=this,n=this.store.select(b.e,{projectId:this.projectId});this.projectItemState$=Object(w.b)([n,this.userId$]).pipe(Object(C.a)((function(n){var r=t(n,2),c=r[0],i=r[1],o=null;return i&&c.unreadCounts&&c.unreadCounts[i]&&(o=c.unreadCounts[i]),{project:c,active:e.active,unreadCount:o}})))}},{key:"context",get:function(){return{project:this.projectId}}}]),e}()).\u0275fac=function(t){return new(t||D)(m.Ob(h.h),m.Ob(m.h))},D.\u0275cmp=m.Ib({type:D,selectors:[["app-project-item-2"]],inputs:{projectId:"projectId",active:"active",actions:"actions",menu:"menu",displayNotifications:"displayNotifications"},features:[m.zb],decls:8,vars:3,consts:[[4,"ngIf"],["projectIcon",""],["folderIcon",""],["projectItemTextinfo",""],[1,"project-item","d-flex","montserrat-text-light"],[1,"project-item__icon","d-flex","h-100"],[3,"ngTemplateOutlet",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"project-item__action-icons","flex-grow-1"],["class","project-item__notification-icons",4,"ngIf"],["class","pr-3 pointer",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"project-item__notification-icons"],["class","project-item__notification-icons__unread",4,"ngIf"],[1,"project-item__notification-icons__unread"],[1,"pr-3","pointer"],[1,"more-vert","grey-icon"],[1,"project-item__icon__project",3,"ngClass"],[1,"grey-icon"],[1,"project-item__text-info"],[1,"project-item__text-info__name"],[1,"project-item__text-info__id"],[1,"project-item__text-info__address"]],template:function(t,e){1&t&&(m.Nc(0,E,10,10,"div",0),m.lc(1,"async"),m.Nc(2,Q,4,6,"ng-template",null,1,m.Oc),m.Nc(4,$,2,0,"ng-template",null,2,m.Oc),m.Nc(6,F,8,5,"ng-template",null,3,m.Oc)),2&t&&m.rc("ngIf",m.mc(1,1,e.projectItemState$))},directives:[u.p,u.u,p.a,u.n],pipes:[u.b,T,u.z,I],styles:[".project-item[_ngcontent-%COMP%]{width:355px;height:104px;background-color:#fff;border-radius:4px;padding:20px 16px 20px 0;color:#000}.project-item__icon[_ngcontent-%COMP%]{width:70px;padding:0 10px;text-align:center;vertical-align:middle;line-height:50px;color:#fff;font-size:18px}.project-item__icon__project[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:25px}.project-item__text-info[_ngcontent-%COMP%]{width:200px}.project-item__text-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.project-item__text-info__name[_ngcontent-%COMP%]{font-weight:700;font-size:18px}.project-item__text-info__id[_ngcontent-%COMP%]{font-weight:700;font-size:14px}.project-item__text-info__address[_ngcontent-%COMP%]{font-size:12px}.project-item[_ngcontent-%COMP%]   .more-vert[_ngcontent-%COMP%]{font-size:30px}.project-item__action-icons[_ngcontent-%COMP%]{overflow:hidden}.project-item__notification-icons[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:18px;height:18px}.project-item__notification-icons__unread[_ngcontent-%COMP%]{border-radius:calc(18px / 2);font-size:10px;text-align:center;vertical-align:middle;line-height:18px;color:#fff;background-color:var(--app-primary)}.project-item[_ngcontent-%COMP%]   .grey-icon[_ngcontent-%COMP%]{color:#9e9e9e}"],changeDetection:0}),D),J=["actions"],X=["menu"];function H(t,e){if(1&t&&(m.Ub(0,"div",5),m.Pb(1,"app-project-item-2",6),m.Tb()),2&t){var n=e.$implicit,r=m.kc();m.Bb(1),m.rc("displayNotifications",r.displayNotifications)("projectId",n)("actions",r.actions)("menu",r.menu)}}var Z,G=((Z=function(){function t(e,r){n(this,t),this.store=e,this.cdr=r,this.projects=[],this.filteredProjects=[],this.hasMenu=!1}return c(t,[{key:"ngAfterContentInit",value:function(){this.hasMenu=!!this.menu,this.cdr.detectChanges()}},{key:"setFilteredProjects",value:function(t){this.filteredProjects=t}}]),t}()).\u0275fac=function(t){return new(t||Z)(m.Ob(h.h),m.Ob(m.h))},Z.\u0275cmp=m.Ib({type:Z,selectors:[["app-projects-list"]],contentQueries:function(t,e,n){var r;1&t&&(m.Hb(n,J,!0,m.L),m.Hb(n,X,!0,m.L)),2&t&&(m.zc(r=m.hc())&&(e.actions=r.first),m.zc(r=m.hc())&&(e.menu=r.first))},inputs:{projectSelector:"projectSelector",displayNotifications:"displayNotifications",projects:"projects"},decls:5,vars:2,consts:[[1,"h-100","d-flex","flex-column"],[3,"allProjects","filteredProjects"],[1,"project-items--container","d-flex","flex-grow-1"],["itemSize","136","minBufferPx","200","maxBufferPx","400",1,"flex-grow-1"],["class","my-3",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"my-3"],[3,"displayNotifications","projectId","actions","menu"]],template:function(t,e){1&t&&(m.Ub(0,"div",0),m.Ub(1,"app-project-search-new",1),m.gc("filteredProjects",(function(t){return e.setFilteredProjects(t)})),m.Tb(),m.Ub(2,"div",2),m.Ub(3,"cdk-virtual-scroll-viewport",3),m.Nc(4,H,2,4,"div",4),m.Tb(),m.Tb(),m.Tb()),2&t&&(m.Bb(1),m.rc("allProjects",e.projects),m.Bb(3),m.rc("cdkVirtualForOf",e.filteredProjects))},directives:[x,P.d,P.a,P.c,V],styles:[".project-items--container[_ngcontent-%COMP%]{min-width:350px;overflow:scroll;scrollbar-width:none}.project-items--container[_ngcontent-%COMP%]::-webkit-scrollbar, .project-items--container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]}),Z);function K(t,e){if(1&t){var n=m.Vb();m.Ub(0,"div",10),m.Ub(1,"mat-icon",11),m.gc("click",(function(){m.Ec(n);var t=e.project;return m.kc().restoreProject(t)})),m.Pc(2,"restore"),m.Tb(),m.Tb()}}var Y,W,q,tt,et=((Y=function(){function t(e,r){n(this,t),this.store=e,this.projectsService=r,this.initProjects()}return c(t,[{key:"initProjects",value:function(){this.projects$=this.store.select(b.d)}},{key:"restoreProject",value:function(t){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.projectsService.restoreProject(t);case 2:case"end":return e.stop()}}),e,this)})))}}]),t}()).\u0275fac=function(t){return new(t||Y)(m.Ob(h.h),m.Ob(g.a))},Y.\u0275cmp=m.Ib({type:Y,selectors:[["app-restorable-projects"]],decls:18,vars:13,consts:[[1,"d-flex","flex-column","h-100"],["backNavigationRoute","/settings"],[1,"d-flex","flex-grow-1"],[3,"projects","displayNotifications"],["class","project-item__action-items h-100 d-flex flex-column justify-content-center"],["actions",""],[1,"pt-5","h-100","w-100","d-flex","flex-column","align-items-center","cn-restore-hints"],["alt","Hint Icon","src","assets/images/icons/empty-state-dirk.svg",1,"img-fluid"],[1,"text-uppercase","cn-restore-hints__primary"],[1,"cn-restore-hints__secondary"],[1,"h-100","d-flex","flex-column","justify-content-center","align-items-end"],[1,"pointer",3,"click"]],template:function(t,e){1&t&&(m.Ub(0,"div",0),m.Ub(1,"app-settings-page-header",1),m.Pc(2),m.lc(3,"translate"),m.Tb(),m.Ub(4,"div",2),m.Ub(5,"app-projects-list",3),m.lc(6,"async"),m.Nc(7,K,3,0,"ng-template",4,5,m.Oc),m.Tb(),m.Ub(9,"div",6),m.Ub(10,"div"),m.Pb(11,"img",7),m.Tb(),m.Ub(12,"div",8),m.Pc(13),m.lc(14,"translate"),m.Tb(),m.Ub(15,"div",9),m.Pc(16),m.lc(17,"translate"),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&t&&(m.Bb(2),m.Qc(m.mc(3,5,"restorableProjects.title")),m.Bb(3),m.rc("projects",m.mc(6,7,e.projects$))("displayNotifications",!1),m.Bb(8),m.Qc(m.mc(14,9,"restorableProjects.hint-1")),m.Bb(3),m.Rc("",m.mc(17,11,"restorableProjects.hint-2")," "))},directives:[j.a,G,p.a],pipes:[l.d,u.b],styles:[".cn-restore-hints__primary[_ngcontent-%COMP%]{color:var(--app-primary);font-size:16px;font-weight:700}.cn-restore-hints__secondary[_ngcontent-%COMP%]{color:var(--color)}"]}),Y),nt=i("9jGm"),rt=i("tyNb"),ct=i("vkgz"),it=i("zkpo"),ot=((W=function(){function t(e,r){var c=this;n(this,t),this.actions=e,this.projectsService=r,this.loadDeletedProjectsEffect$=this.actions.pipe(Object(nt.d)(it.c),Object(ct.a)((function(t){console.log("Loading deleted projects"),c.projectsService.initWatchDeletedProjects()})))}return c(t,[{key:"ngrxOnInitEffects",value:function(){return Object(it.c)()}}]),t}()).\u0275fac=function(t){return new(t||W)(m.cc(nt.a),m.cc(g.a))},W.\u0275prov=m.Kb({token:W,factory:W.\u0275fac}),Object(d.b)([Object(nt.b)({dispatch:!1}),Object(d.c)("design:type",Object)],W.prototype,"loadDeletedProjectsEffect$",void 0),W),at=i("NRBi"),st=((q=function t(){n(this,t)}).\u0275mod=m.Mb({type:q}),q.\u0275inj=m.Lb({factory:function(t){return new(t||q)},imports:[[u.c,P.f,p.b,y.c,O.d,l.c,at.a]]}),q),ut=i("8NVz"),lt=[{path:"",component:et}],pt=((tt=function t(){n(this,t)}).\u0275mod=m.Mb({type:tt}),tt.\u0275inj=m.Lb({factory:function(t){return new(t||tt)},imports:[[rt.l.forChild(lt),u.c,l.c,p.b,f.b,P.f,st,ut.a,nt.c.forFeature([ot])]]}),tt)}}])}();